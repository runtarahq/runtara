{
  "agents": [
    {
      "capabilities": [
        {
          "description": "Convert country name to ISO code",
          "displayName": "Country to ISO Code",
          "hasSideEffects": false,
          "id": "country-name-to-iso-code",
          "inputType": "CountryNameToIsoCodeInput",
          "inputs": [
            {
              "description": "The full country name or commonly used alternative",
              "displayName": "Country Name",
              "example": "United States",
              "name": "country_name",
              "required": true,
              "type": "string"
            },
            {
              "description": "The type of ISO code to return (alpha2 or alpha3)",
              "displayName": "Code Type",
              "example": "alpha2",
              "name": "code_type",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "country_name_to_iso_code",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Get the current date/time in a custom format",
          "displayName": "Current Formatted DateTime",
          "hasSideEffects": false,
          "id": "get-current-formatted-datetime",
          "inputType": "GetCurrentFormattedDateTimeInput",
          "inputs": [
            {
              "description": "Format pattern using yyyy, MM, dd, HH, mm, ss tokens",
              "displayName": "Format",
              "example": "yyyy-MM-dd",
              "name": "format",
              "required": true,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "get_current_formatted_datetime",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Get the current date/time in ISO format",
          "displayName": "Current ISO Datetime",
          "hasSideEffects": false,
          "id": "get-current-iso-datetime",
          "inputType": "GetCurrentIsoDatetimeInput",
          "inputs": [],
          "isIdempotent": true,
          "name": "get_current_iso_datetime",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Get the current Unix timestamp",
          "displayName": "Current Unix Timestamp",
          "hasSideEffects": false,
          "id": "get-current-unix-timestamp",
          "inputType": "GetCurrentUnixTimestampInput",
          "inputs": [],
          "isIdempotent": true,
          "name": "get_current_unix_timestamp",
          "output": {
            "type": "integer"
          },
          "rateLimited": false
        },
        {
          "description": "Convert ISO date to Unix timestamp",
          "displayName": "ISO to Unix",
          "hasSideEffects": false,
          "id": "iso-to-unix-timestamp",
          "inputType": "IsoToUnixTimestampInput",
          "inputs": [
            {
              "description": "The date/time in ISO 8601 format to convert to Unix timestamp",
              "displayName": "ISO Date",
              "example": "2024-01-15T10:30:00Z",
              "name": "iso_date",
              "required": true,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "iso_to_unix_timestamp",
          "output": {
            "type": "integer"
          },
          "rateLimited": false
        },
        {
          "description": "Format an ISO date to a custom format",
          "displayName": "Format Date",
          "hasSideEffects": false,
          "id": "format-date-from-iso",
          "inputType": "FormatDateFromIsoInput",
          "inputs": [
            {
              "description": "The date/time in ISO 8601 format (e.g., 2024-01-15T10:30:00Z)",
              "displayName": "ISO Date",
              "example": "2024-01-15T10:30:00Z",
              "name": "iso_date",
              "required": true,
              "type": "string"
            },
            {
              "description": "Format pattern using yyyy, MM, dd, HH, mm, ss tokens",
              "displayName": "Target Format",
              "example": "yyyy-MM-dd HH:mm:ss",
              "name": "target_format",
              "required": true,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "format_date_from_iso",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Evaluate a mathematical expression with variables",
          "displayName": "Calculate",
          "hasSideEffects": false,
          "id": "calculate",
          "inputType": "CalculateInput",
          "inputs": [
            {
              "description": "Mathematical expression with variables and operators (+, -, *, /, %, parentheses)",
              "displayName": "Expression",
              "example": "(x + y) * 2",
              "name": "expression",
              "required": true,
              "type": "string"
            },
            {
              "description": "Map of variable names to their numeric values (supports numbers and string numbers)",
              "displayName": "Variables",
              "name": "variables",
              "required": true,
              "type": "object"
            },
            {
              "default": false,
              "description": "Round the result to the specified number of decimal places",
              "displayName": "Enable Rounding",
              "name": "enable_rounding",
              "required": false,
              "type": "boolean"
            },
            {
              "description": "Number of decimal places to round to (maximum 15)",
              "displayName": "Decimal Places",
              "example": "2",
              "name": "decimal_places",
              "required": false,
              "type": "integer"
            }
          ],
          "isIdempotent": true,
          "name": "calculate",
          "output": {
            "format": "double",
            "type": "number"
          },
          "rateLimited": false
        },
        {
          "description": "Pause execution for specified milliseconds",
          "displayName": "Delay",
          "hasSideEffects": false,
          "id": "delay-in-ms",
          "inputType": "DelayInMsInput",
          "inputs": [
            {
              "description": "The amount of time to pause execution in milliseconds",
              "displayName": "Delay (milliseconds)",
              "example": "1000",
              "name": "delay_value",
              "required": true,
              "type": "integer"
            }
          ],
          "isIdempotent": true,
          "name": "delay_in_ms",
          "output": {
            "type": "integer"
          },
          "rateLimited": false
        },
        {
          "description": "No-op operation that returns null",
          "displayName": "Do Nothing",
          "hasSideEffects": false,
          "id": "do-nothing",
          "inputType": "DoNothingInput",
          "inputs": [],
          "isIdempotent": true,
          "name": "do_nothing",
          "output": {
            "type": "any"
          },
          "rateLimited": false
        },
        {
          "description": "Returns the input JSON value",
          "displayName": "Return Input",
          "hasSideEffects": false,
          "id": "return-input",
          "inputType": "ReturnInputData",
          "inputs": [
            {
              "description": "The JSON value to return as output",
              "displayName": "Value",
              "name": "value",
              "required": true,
              "type": "any"
            }
          ],
          "isIdempotent": true,
          "name": "return_input",
          "output": {
            "type": "any"
          },
          "rateLimited": false
        },
        {
          "description": "Returns the input string value",
          "displayName": "Return String",
          "hasSideEffects": false,
          "id": "return-input-string",
          "inputType": "ReturnStringInput",
          "inputs": [
            {
              "description": "The string value to return as output",
              "displayName": "Value",
              "example": "Hello World",
              "name": "value",
              "required": true,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "return_input_string",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Generate an array of random integers",
          "displayName": "Random Array",
          "hasSideEffects": false,
          "id": "random-array",
          "inputType": "ReturnRandomArrayInput",
          "inputs": [
            {
              "description": "The number of random integers to generate",
              "displayName": "Array Size",
              "example": "5",
              "name": "size",
              "required": true,
              "type": "integer"
            }
          ],
          "isIdempotent": true,
          "name": "random_array",
          "output": {
            "type": "array"
          },
          "rateLimited": false
        },
        {
          "description": "Generate a random double between 0 and 1",
          "displayName": "Random Double",
          "hasSideEffects": false,
          "id": "random-double",
          "inputType": "RandomDoubleInput",
          "inputs": [],
          "isIdempotent": true,
          "name": "random_double",
          "output": {
            "format": "double",
            "type": "number"
          },
          "rateLimited": false
        }
      ],
      "description": "Utility capabilities for random numbers, calculations, delays, timestamps, and country lookups",
      "hasSideEffects": false,
      "id": "utils",
      "integrationIds": [],
      "name": "Utils",
      "supportsConnections": false
    },
    {
      "capabilities": [
        {
          "description": "Get the length of an array, string, or number of keys in an object",
          "displayName": "Array Length",
          "hasSideEffects": false,
          "id": "array-length",
          "inputType": "ArrayLengthInput",
          "inputs": [
            {
              "description": "Array, string, or object to get the length/size of",
              "displayName": "Value",
              "example": "[1, 2, 3]",
              "name": "value",
              "required": true,
              "type": "any"
            }
          ],
          "isIdempotent": true,
          "name": "array_length",
          "output": {
            "displayName": "Array Length Output",
            "fields": [
              {
                "description": "Length of array/string, or number of keys in object",
                "displayName": "Length",
                "name": "length",
                "type": "integer"
              },
              {
                "description": "True if the value was an array",
                "displayName": "Is Array",
                "name": "is_array",
                "type": "boolean"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Extract nested arrays from each item by property path and flatten into a single array",
          "displayName": "Flat Map",
          "hasSideEffects": false,
          "id": "flat-map",
          "inputType": "FlatMapInput",
          "inputs": [
            {
              "description": "The array of objects to flat map",
              "displayName": "Input Array",
              "example": "[{\"items\": [1, 2]}, {\"items\": [3, 4]}]",
              "items": {
                "type": "any"
              },
              "name": "value",
              "required": true,
              "type": "array"
            },
            {
              "description": "The property path to the nested array in each item (JSONPath syntax)",
              "displayName": "Property Path",
              "example": "items",
              "name": "property_path",
              "required": true,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "flat_map",
          "output": {
            "displayName": "Flat Map Output",
            "fields": [
              {
                "description": "Flattened array of all nested items",
                "displayName": "Items",
                "name": "items",
                "type": "array"
              },
              {
                "description": "Total number of items in the flattened array",
                "displayName": "Count",
                "name": "count",
                "type": "integer"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Append an item to the end of an array",
          "displayName": "Append",
          "hasSideEffects": false,
          "id": "append",
          "inputType": "AppendInput",
          "inputs": [
            {
              "description": "The array to append an item to (can contain objects or primitive values)",
              "displayName": "Array",
              "example": "[{\"name\": \"Alice\"}, {\"name\": \"Bob\"}]",
              "items": {
                "type": "any"
              },
              "name": "array",
              "required": true,
              "type": "array"
            },
            {
              "description": "The item to append to the array (can be an object or primitive value)",
              "displayName": "Item",
              "example": "{\"name\": \"Charlie\"}",
              "name": "item",
              "required": true,
              "type": "any"
            }
          ],
          "isIdempotent": true,
          "name": "append",
          "output": {
            "displayName": "Append Output",
            "fields": [
              {
                "description": "Array with the new item appended",
                "displayName": "Array",
                "name": "array",
                "type": "array"
              },
              {
                "description": "New length of the array after appending",
                "displayName": "Length",
                "name": "length",
                "type": "integer"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Group array items by a property key, returning either a map or array of groups",
          "displayName": "Group By",
          "hasSideEffects": false,
          "id": "group-by",
          "inputType": "GroupByInput",
          "inputs": [
            {
              "description": "The array of items to group",
              "displayName": "Input Array",
              "example": "[{\"name\": \"Alice\", \"status\": \"active\"}, {\"name\": \"Bob\", \"status\": \"inactive\"}]",
              "name": "value",
              "required": true,
              "type": "any"
            },
            {
              "description": "The property path to use as the grouping key (JSONPath syntax)",
              "displayName": "Group Key",
              "example": "status",
              "name": "key",
              "required": true,
              "type": "string"
            },
            {
              "default": false,
              "description": "Return grouped items as a map (key -> items) instead of an array of arrays",
              "displayName": "Return As Map",
              "example": "true",
              "name": "as_map",
              "required": false,
              "type": "boolean"
            }
          ],
          "isIdempotent": true,
          "name": "group_by",
          "output": {
            "displayName": "Group By Output",
            "fields": [
              {
                "description": "Grouped items - either a map (key -> items) or array of arrays",
                "displayName": "Groups",
                "name": "groups",
                "type": "any"
              },
              {
                "description": "Number of unique groups created",
                "displayName": "Group Count",
                "name": "group_count",
                "type": "integer"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Map fields from a source object to a target object using field path mappings",
          "displayName": "Map Fields",
          "hasSideEffects": false,
          "id": "map-fields",
          "inputType": "MapFieldsInput",
          "inputs": [
            {
              "description": "The source object containing data to map",
              "displayName": "Source Data",
              "example": "{\"firstName\": \"Alice\", \"userAge\": 30, \"email\": \"alice@example.com\"}",
              "name": "source_data",
              "required": true,
              "type": "any"
            },
            {
              "description": "Map of source field paths to target field names",
              "displayName": "Field Mappings",
              "example": "{\"firstName\": \"name\", \"userAge\": \"age\"}",
              "name": "mappings",
              "required": true,
              "type": "object"
            }
          ],
          "isIdempotent": true,
          "name": "map_fields",
          "output": {
            "displayName": "Map Fields Output",
            "fields": [
              {
                "description": "Object with mapped field values",
                "displayName": "Result",
                "name": "result",
                "type": "object"
              },
              {
                "description": "Number of fields successfully mapped",
                "displayName": "Field Count",
                "name": "field_count",
                "type": "integer"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Sort an array of items, optionally by a property path",
          "displayName": "Sort Array",
          "hasSideEffects": false,
          "id": "sort",
          "inputType": "SortInput",
          "inputs": [
            {
              "description": "The array to sort",
              "displayName": "Input Array",
              "example": "[{\"age\": 35}, {\"age\": 30}, {\"age\": 25}]",
              "items": {
                "type": "any"
              },
              "name": "value",
              "required": true,
              "type": "array"
            },
            {
              "description": "The property path to sort by (if omitted, sorts the items directly)",
              "displayName": "Property Path",
              "example": "age",
              "name": "property_path",
              "required": false,
              "type": "string"
            },
            {
              "default": true,
              "description": "Whether to sort in ascending order (true) or descending order (false)",
              "displayName": "Ascending Order",
              "example": "true",
              "name": "ascending",
              "required": false,
              "type": "boolean"
            }
          ],
          "isIdempotent": true,
          "name": "sort",
          "output": {
            "displayName": "Sort Output",
            "fields": [
              {
                "description": "Array of sorted items",
                "displayName": "Items",
                "name": "items",
                "type": "array"
              },
              {
                "description": "Number of items in the sorted array",
                "displayName": "Count",
                "name": "count",
                "type": "integer"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Filter an array based on property values matching or excluding specified values",
          "displayName": "Filter Array",
          "hasSideEffects": false,
          "id": "filter",
          "inputType": "FilterInput",
          "inputs": [
            {
              "description": "The array of items to filter",
              "displayName": "Input Array",
              "example": "[{\"status\": \"active\"}, {\"status\": \"inactive\"}]",
              "items": {
                "type": "any"
              },
              "name": "value",
              "required": false,
              "type": "array"
            },
            {
              "description": "The property path to extract from each item (JSONPath syntax). Use \"$\" or \"\" to filter the array values directly.",
              "displayName": "Property Path",
              "example": "status",
              "name": "property_path",
              "required": true,
              "type": "string"
            },
            {
              "description": "The value(s) to compare against (single value or array)",
              "displayName": "Match Values",
              "example": "[\"active\", \"pending\"]",
              "name": "match_values",
              "required": true,
              "type": "any"
            },
            {
              "description": "Whether to include or exclude matching items",
              "displayName": "Match Condition",
              "enum": [
                "INCLUDES",
                "EXCLUDES",
                "STARTS_WITH",
                "ENDS_WITH",
                "CONTAINS"
              ],
              "example": "INCLUDES",
              "name": "match_condition",
              "required": true,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "filter",
          "output": {
            "displayName": "Filter Output",
            "fields": [
              {
                "description": "Array of items that passed the filter",
                "displayName": "Items",
                "name": "items",
                "type": "array"
              },
              {
                "description": "Number of items that passed the filter",
                "displayName": "Count",
                "name": "count",
                "type": "integer"
              },
              {
                "description": "Number of items removed by the filter",
                "displayName": "Removed Count",
                "name": "removed_count",
                "type": "integer"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Convert a value to a JSON string",
          "displayName": "To JSON String",
          "hasSideEffects": false,
          "id": "to-json-string",
          "inputType": "ToJsonStringInput",
          "inputs": [
            {
              "description": "The value to serialize to a JSON string",
              "displayName": "Input Value",
              "example": "{\"name\": \"Alice\", \"age\": 30}",
              "name": "value",
              "required": true,
              "type": "any"
            }
          ],
          "isIdempotent": true,
          "name": "to_json_string",
          "output": {
            "displayName": "JSON String Output",
            "fields": [
              {
                "description": "The serialized JSON string",
                "displayName": "JSON",
                "name": "json",
                "type": "string"
              },
              {
                "description": "Length of the JSON string in characters",
                "displayName": "Length",
                "name": "length",
                "type": "integer"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Parse a JSON string into a structured value",
          "displayName": "From JSON String",
          "hasSideEffects": false,
          "id": "from-json-string",
          "inputType": "FromJsonStringInput",
          "inputs": [
            {
              "description": "The JSON string to parse into a value",
              "displayName": "JSON String",
              "example": "\"{\\\"name\\\":\\\"Alice\\\",\\\"age\\\":30}\"",
              "name": "value",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "from_json_string",
          "output": {
            "type": "any"
          },
          "rateLimited": false
        },
        {
          "description": "Select the first truthy value from an array (skips null, empty, zero, false)",
          "displayName": "Select First",
          "hasSideEffects": false,
          "id": "select-first",
          "inputType": "SelectFirstInput",
          "inputs": [
            {
              "description": "The array to select the first truthy value from (skips null, empty strings, 0, false)",
              "displayName": "Input Array",
              "example": "[null, \"\", 0, \"hello\", \"world\"]",
              "items": {
                "type": "any"
              },
              "name": "value",
              "required": false,
              "type": "array"
            }
          ],
          "isIdempotent": true,
          "name": "select_first",
          "output": {
            "type": "any"
          },
          "rateLimited": false
        },
        {
          "description": "Filter an array removing elements with null, empty, blank, or zero values",
          "displayName": "Filter Non-Values",
          "hasSideEffects": false,
          "id": "filter-non-values",
          "inputType": "FilterNoValueInput",
          "inputs": [
            {
              "description": "The array of items to filter",
              "displayName": "Input Array",
              "example": "[{\"x\": 1}, {\"x\": null}, {\"x\": \"\"}]",
              "items": {
                "type": "any"
              },
              "name": "value",
              "required": true,
              "type": "array"
            },
            {
              "description": "The property path to check in each item (if omitted, checks the item itself)",
              "displayName": "Property Path",
              "example": "x",
              "name": "property_path",
              "required": false,
              "type": "string"
            },
            {
              "default": false,
              "description": "Remove items where the value is an empty string (\"\")",
              "displayName": "Filter Empty Strings",
              "example": "false",
              "name": "filter_empty_strings",
              "required": false,
              "type": "boolean"
            },
            {
              "default": false,
              "description": "Remove items where the value is null",
              "displayName": "Filter Null Values",
              "example": "true",
              "name": "filter_null_values",
              "required": false,
              "type": "boolean"
            },
            {
              "default": false,
              "description": "Remove items where the value is a whitespace-only string",
              "displayName": "Filter Blank Strings",
              "example": "false",
              "name": "filter_blank_strings",
              "required": false,
              "type": "boolean"
            },
            {
              "default": false,
              "description": "Remove items where the value is 0 or \"0\"",
              "displayName": "Filter Zero Values",
              "example": "false",
              "name": "filter_zero_values",
              "required": false,
              "type": "boolean"
            }
          ],
          "isIdempotent": true,
          "name": "filter_non_values",
          "output": {
            "displayName": "Filter Output",
            "fields": [
              {
                "description": "Array of items that passed the filter",
                "displayName": "Items",
                "name": "items",
                "type": "array"
              },
              {
                "description": "Number of items that passed the filter",
                "displayName": "Count",
                "name": "count",
                "type": "integer"
              },
              {
                "description": "Number of items removed by the filter",
                "displayName": "Removed Count",
                "name": "removed_count",
                "type": "integer"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Set a value in an object at a specified JSONPath-like property path",
          "displayName": "Set Value By Path",
          "hasSideEffects": false,
          "id": "set-value-by-path",
          "inputType": "SetValueByPathInput",
          "inputs": [
            {
              "description": "The object to set a property value in",
              "displayName": "Target Object",
              "example": "{\"user\": {\"name\": \"Alice\"}}",
              "name": "target",
              "required": false,
              "type": "any"
            },
            {
              "description": "The property path to set (JSONPath syntax, creates nested objects if needed)",
              "displayName": "Property Path",
              "example": "user.age",
              "name": "property_path",
              "required": false,
              "type": "string"
            },
            {
              "description": "The value to set at the property path",
              "displayName": "Value",
              "example": "30",
              "name": "value",
              "required": false,
              "type": "any"
            }
          ],
          "isIdempotent": true,
          "name": "set_value_by_path",
          "output": {
            "type": "any"
          },
          "rateLimited": false
        },
        {
          "description": "Get a value from an object using a JSONPath-like property path",
          "displayName": "Get Value By Path",
          "hasSideEffects": false,
          "id": "get-value-by-path",
          "inputType": "GetValueByPathInput",
          "inputs": [
            {
              "description": "The object to extract a property value from",
              "displayName": "Input Value",
              "example": "{\"user\": {\"name\": \"Alice\", \"age\": 30}}",
              "name": "value",
              "required": false,
              "type": "any"
            },
            {
              "description": "The property path to extract (JSONPath syntax)",
              "displayName": "Property Path",
              "example": "user.name",
              "name": "property_path",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "get_value_by_path",
          "output": {
            "type": "any"
          },
          "rateLimited": false
        },
        {
          "description": "Extract property values from an array of objects based on a property path",
          "displayName": "Extract Property",
          "hasSideEffects": false,
          "id": "extract",
          "inputType": "ExtractInput",
          "inputs": [
            {
              "description": "The array of objects to extract property values from",
              "displayName": "Input Array",
              "example": "[{\"name\": \"Alice\", \"age\": 30}, {\"name\": \"Bob\", \"age\": 25}]",
              "items": {
                "type": "any"
              },
              "name": "value",
              "required": true,
              "type": "array"
            },
            {
              "description": "The property path to extract from each item (JSONPath syntax)",
              "displayName": "Property Path",
              "example": "name",
              "name": "property_path",
              "required": true,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "extract",
          "output": {
            "displayName": "Extract Output",
            "fields": [
              {
                "description": "Array of extracted property values",
                "displayName": "Values",
                "name": "values",
                "type": "array"
              },
              {
                "description": "Number of values extracted",
                "displayName": "Count",
                "name": "count",
                "type": "integer"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        }
      ],
      "description": "Transform capabilities for data manipulation, filtering, sorting, and JSON operations",
      "hasSideEffects": false,
      "id": "transform",
      "integrationIds": [],
      "name": "Transform",
      "supportsConnections": false
    },
    {
      "capabilities": [
        {
          "description": "Extract CSV headers with type inference from the first data row",
          "displayName": "Get CSV Header",
          "hasSideEffects": false,
          "id": "get-header",
          "inputType": "GetHeaderInput",
          "inputs": [
            {
              "description": "Raw CSV data as bytes, base64 encoded string, or file data object",
              "displayName": "CSV Data",
              "name": "data",
              "required": true,
              "type": "string"
            },
            {
              "description": "Character encoding of the CSV data",
              "displayName": "Encoding",
              "example": "UTF-8",
              "name": "encoding",
              "required": false,
              "type": "string"
            },
            {
              "description": "Column delimiter character",
              "displayName": "Delimiter",
              "example": ",",
              "name": "delimiter",
              "required": false,
              "type": "string"
            },
            {
              "description": "Character used to quote fields containing delimiters",
              "displayName": "Quote Character",
              "example": "\"",
              "name": "quote_char",
              "required": false,
              "type": "string"
            },
            {
              "description": "Character used to escape special characters (optional)",
              "displayName": "Escape Character",
              "name": "escape_char",
              "required": false,
              "type": "string"
            },
            {
              "default": true,
              "description": "Whether the first row contains column headers",
              "displayName": "Use Header",
              "example": "true",
              "name": "use_header",
              "required": false,
              "type": "boolean"
            },
            {
              "default": true,
              "description": "Whether to skip empty lines in the CSV",
              "displayName": "Skip Empty Lines",
              "example": "true",
              "name": "skip_empty_lines",
              "required": false,
              "type": "boolean"
            },
            {
              "default": false,
              "description": "Whether to trim whitespace from field values",
              "displayName": "Trim Whitespace",
              "example": "false",
              "name": "trim_whitespace",
              "required": false,
              "type": "boolean"
            }
          ],
          "isIdempotent": true,
          "name": "get_header",
          "output": {
            "type": "object"
          },
          "rateLimited": false
        },
        {
          "description": "Convert JSON data to CSV bytes",
          "displayName": "Generate CSV",
          "hasSideEffects": false,
          "id": "to-csv",
          "inputType": "ToCsvInput",
          "inputs": [
            {
              "description": "Data to convert to CSV (array of objects, array of arrays, or single object)",
              "displayName": "Value",
              "example": "[{\"name\": \"Alice\", \"age\": 30}]",
              "name": "value",
              "required": true,
              "type": "any"
            },
            {
              "description": "Character encoding for the output CSV",
              "displayName": "Encoding",
              "example": "UTF-8",
              "name": "encoding",
              "required": false,
              "type": "string"
            },
            {
              "description": "Column delimiter character",
              "displayName": "Delimiter",
              "example": ",",
              "name": "delimiter",
              "required": false,
              "type": "string"
            },
            {
              "description": "Character used to quote fields containing delimiters",
              "displayName": "Quote Character",
              "example": "\"",
              "name": "quote_char",
              "required": false,
              "type": "string"
            },
            {
              "description": "Character used to escape special characters (optional)",
              "displayName": "Escape Character",
              "name": "escape_char",
              "required": false,
              "type": "string"
            },
            {
              "default": true,
              "description": "Whether to include a header row in the output",
              "displayName": "Use Header",
              "example": "true",
              "name": "use_header",
              "required": false,
              "type": "boolean"
            }
          ],
          "isIdempotent": true,
          "name": "to_csv",
          "output": {
            "type": "array"
          },
          "rateLimited": false
        },
        {
          "description": "Parse CSV bytes into a JSON array of objects or arrays",
          "displayName": "Parse CSV",
          "hasSideEffects": false,
          "id": "from-csv",
          "inputType": "FromCsvInput",
          "inputs": [
            {
              "description": "Raw CSV data as bytes, base64 encoded string, or file data object",
              "displayName": "CSV Data",
              "name": "data",
              "required": true,
              "type": "string"
            },
            {
              "description": "Character encoding of the CSV data",
              "displayName": "Encoding",
              "example": "UTF-8",
              "name": "encoding",
              "required": false,
              "type": "string"
            },
            {
              "description": "Column delimiter character",
              "displayName": "Delimiter",
              "example": ",",
              "name": "delimiter",
              "required": false,
              "type": "string"
            },
            {
              "description": "Character used to quote fields containing delimiters",
              "displayName": "Quote Character",
              "example": "\"",
              "name": "quote_char",
              "required": false,
              "type": "string"
            },
            {
              "description": "Character used to escape special characters (optional)",
              "displayName": "Escape Character",
              "name": "escape_char",
              "required": false,
              "type": "string"
            },
            {
              "default": true,
              "description": "Whether the first row contains column headers",
              "displayName": "Use Header",
              "example": "true",
              "name": "use_header",
              "required": false,
              "type": "boolean"
            },
            {
              "default": true,
              "description": "Whether to skip empty lines in the CSV",
              "displayName": "Skip Empty Lines",
              "example": "true",
              "name": "skip_empty_lines",
              "required": false,
              "type": "boolean"
            },
            {
              "default": false,
              "description": "Whether to trim whitespace from field values",
              "displayName": "Trim Whitespace",
              "example": "false",
              "name": "trim_whitespace",
              "required": false,
              "type": "boolean"
            }
          ],
          "isIdempotent": true,
          "name": "from_csv",
          "output": {
            "type": "array"
          },
          "rateLimited": false
        }
      ],
      "description": "CSV capabilities for parsing and working with CSV data",
      "hasSideEffects": false,
      "id": "csv",
      "integrationIds": [],
      "name": "Csv",
      "supportsConnections": false
    },
    {
      "capabilities": [
        {
          "description": "Encode text or bytes to base64 as a FileData structure",
          "displayName": "To Base64",
          "hasSideEffects": false,
          "id": "to-base64",
          "inputType": "ToBase64Input",
          "inputs": [
            {
              "description": "Text to encode, bytes array, or FileData-like structure",
              "displayName": "Data",
              "name": "data",
              "required": true,
              "type": "any"
            },
            {
              "description": "Optional filename for FileData output",
              "displayName": "Filename",
              "example": "document.txt",
              "name": "filename",
              "required": false,
              "type": "string"
            },
            {
              "description": "Optional MIME type for FileData output",
              "displayName": "MIME Type",
              "example": "text/plain",
              "name": "mime_type",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "to_base64",
          "output": {
            "description": "Base64-encoded file with optional metadata",
            "displayName": "File Data",
            "fields": [
              {
                "description": "Base64-encoded file content",
                "displayName": "Content",
                "name": "content",
                "type": "string"
              },
              {
                "description": "Original filename (optional)",
                "displayName": "Filename",
                "name": "filename",
                "nullable": true,
                "type": "string"
              },
              {
                "description": "MIME type (e.g., 'text/plain', 'text/csv', 'application/xml')",
                "displayName": "MIME Type",
                "name": "mime_type",
                "nullable": true,
                "type": "string"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Decode base64 content to a string",
          "displayName": "From Base64",
          "hasSideEffects": false,
          "id": "from-base64",
          "inputType": "FromBase64Input",
          "inputs": [
            {
              "description": "Base64 encoded string or FileData object",
              "displayName": "Data",
              "name": "data",
              "required": true,
              "type": "any"
            },
            {
              "description": "Output encoding for text",
              "displayName": "Encoding",
              "example": "UTF-8",
              "name": "encoding",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "from_base64",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Convert text to a byte array",
          "displayName": "As Byte Array",
          "hasSideEffects": false,
          "id": "as-byte-array",
          "inputType": "ByteArrayInput",
          "inputs": [
            {
              "description": "The text to convert to bytes",
              "displayName": "Input Text",
              "example": "Hello",
              "name": "text",
              "required": false,
              "type": "string"
            },
            {
              "description": "The text encoding to use",
              "displayName": "Encoding",
              "enum": [
                "UTF-8"
              ],
              "example": "UTF-8",
              "name": "encoding",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "as_byte_array",
          "output": {
            "type": "array"
          },
          "rateLimited": false
        },
        {
          "description": "Create a SHA-256 hash of the input text",
          "displayName": "Hash Text",
          "hasSideEffects": false,
          "id": "hash-text",
          "inputType": "SimpleTextInput",
          "inputs": [
            {
              "description": "The text to process",
              "displayName": "Input Text",
              "example": "Hello World",
              "name": "text",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "hash_text",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Convert text to a URL-safe or SKU-friendly format",
          "displayName": "Slugify",
          "hasSideEffects": false,
          "id": "slugify",
          "inputType": "SimpleTextInput",
          "inputs": [
            {
              "description": "The text to process",
              "displayName": "Input Text",
              "example": "Hello World",
              "name": "text",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "slugify",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Collapse multiline text into one line or expand delimited text into multiple lines",
          "displayName": "Collapse/Expand Lines",
          "hasSideEffects": false,
          "id": "collapse-expand-lines",
          "inputType": "SplitInput",
          "inputs": [
            {
              "description": "The text to split",
              "displayName": "Input Text",
              "example": "apple,banana,cherry",
              "name": "text",
              "required": false,
              "type": "string"
            },
            {
              "description": "The delimiter to split on",
              "displayName": "Split Delimiter",
              "example": ",",
              "name": "delimiter",
              "required": false,
              "type": "string"
            },
            {
              "description": "The delimiter to join with (for split-join operation)",
              "displayName": "Join Delimiter",
              "example": " - ",
              "name": "join_delimiter",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "collapse_expand_lines",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Extract text between start and end delimiters",
          "displayName": "Substring Extraction",
          "hasSideEffects": false,
          "id": "substring-extraction",
          "inputType": "SubstringInput",
          "inputs": [
            {
              "description": "The text to extract from",
              "displayName": "Input Text",
              "example": "Hello [World] from Rust",
              "name": "text",
              "required": false,
              "type": "string"
            },
            {
              "description": "The starting delimiter",
              "displayName": "Start Delimiter",
              "example": "[",
              "name": "start_delimiter",
              "required": false,
              "type": "string"
            },
            {
              "description": "The ending delimiter",
              "displayName": "End Delimiter",
              "example": "]",
              "name": "end_delimiter",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "substring_extraction",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Remove specific characters from text",
          "displayName": "Remove Characters",
          "hasSideEffects": false,
          "id": "remove-characters",
          "inputType": "RemoveCharactersInput",
          "inputs": [
            {
              "description": "The text to process",
              "displayName": "Input Text",
              "example": "Hello, World!",
              "name": "text",
              "required": false,
              "type": "string"
            },
            {
              "description": "Characters to remove (each character in the string will be removed)",
              "displayName": "Characters to Remove",
              "example": ",!",
              "name": "pattern",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "remove_characters",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Split text by a delimiter into an array",
          "displayName": "Split",
          "hasSideEffects": false,
          "id": "split",
          "inputType": "SplitInput",
          "inputs": [
            {
              "description": "The text to split",
              "displayName": "Input Text",
              "example": "apple,banana,cherry",
              "name": "text",
              "required": false,
              "type": "string"
            },
            {
              "description": "The delimiter to split on",
              "displayName": "Split Delimiter",
              "example": ",",
              "name": "delimiter",
              "required": false,
              "type": "string"
            },
            {
              "description": "The delimiter to join with (for split-join operation)",
              "displayName": "Join Delimiter",
              "example": " - ",
              "name": "join_delimiter",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "split",
          "output": {
            "type": "array"
          },
          "rateLimited": false
        },
        {
          "description": "Split text by one delimiter and join with another",
          "displayName": "Split and Join",
          "hasSideEffects": false,
          "id": "split-join",
          "inputType": "SplitInput",
          "inputs": [
            {
              "description": "The text to split",
              "displayName": "Input Text",
              "example": "apple,banana,cherry",
              "name": "text",
              "required": false,
              "type": "string"
            },
            {
              "description": "The delimiter to split on",
              "displayName": "Split Delimiter",
              "example": ",",
              "name": "delimiter",
              "required": false,
              "type": "string"
            },
            {
              "description": "The delimiter to join with (for split-join operation)",
              "displayName": "Join Delimiter",
              "example": " - ",
              "name": "join_delimiter",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "split_join",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Get the first space-separated token",
          "displayName": "Extract First Word",
          "hasSideEffects": false,
          "id": "extract-first-word",
          "inputType": "SimpleTextInput",
          "inputs": [
            {
              "description": "The text to process",
              "displayName": "Input Text",
              "example": "Hello World",
              "name": "text",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "extract_first_word",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Get only the text before the first newline",
          "displayName": "Extract First Line",
          "hasSideEffects": false,
          "id": "extract-first-line",
          "inputType": "SimpleTextInput",
          "inputs": [
            {
              "description": "The text to process",
              "displayName": "Input Text",
              "example": "Hello World",
              "name": "text",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "extract_first_line",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Replace all instances of a pattern with a replacement string",
          "displayName": "Find and Replace",
          "hasSideEffects": false,
          "id": "find-replace",
          "inputType": "FindReplaceInput",
          "inputs": [
            {
              "description": "The text to search within",
              "displayName": "Input Text",
              "example": "Hello World",
              "name": "text",
              "required": false,
              "type": "string"
            },
            {
              "description": "The text pattern to find",
              "displayName": "Find Pattern",
              "example": "World",
              "name": "pattern",
              "required": false,
              "type": "string"
            },
            {
              "description": "The replacement text",
              "displayName": "Replacement",
              "example": "Universe",
              "name": "replacement",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "find_replace",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Convert text to lowercase, UPPERCASE, or Title Case",
          "displayName": "Case Conversion",
          "hasSideEffects": false,
          "id": "case-conversion",
          "inputType": "CaseConversionInput",
          "inputs": [
            {
              "description": "The text to convert",
              "displayName": "Input Text",
              "example": "Hello World",
              "name": "text",
              "required": false,
              "type": "string"
            },
            {
              "description": "The target case format (lowercase, uppercase, or title-case)",
              "displayName": "Case Format",
              "enum": [
                "lowercase",
                "uppercase",
                "title-case"
              ],
              "example": "lowercase",
              "name": "format",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "case_conversion",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Remove leading/trailing whitespace and collapse multiple spaces into one",
          "displayName": "Trim and Normalize",
          "hasSideEffects": false,
          "id": "trim-normalize",
          "inputType": "SimpleTextInput",
          "inputs": [
            {
              "description": "The text to process",
              "displayName": "Input Text",
              "example": "Hello World",
              "name": "text",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "trim_normalize",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Render a Jinja2-style template with provided variables",
          "displayName": "Render Template",
          "hasSideEffects": false,
          "id": "render-template",
          "inputType": "TemplateInput",
          "inputs": [
            {
              "description": "The template string with Jinja2 syntax",
              "displayName": "Template",
              "example": "Hello {{name}}, you have {{count}} messages",
              "name": "text",
              "required": false,
              "type": "string"
            },
            {
              "description": "JSON object with template variables",
              "displayName": "Variables",
              "example": "{\"name\": \"Alice\", \"count\": 5}",
              "name": "context",
              "required": true,
              "type": "any"
            }
          ],
          "isIdempotent": true,
          "name": "render_template",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        }
      ],
      "description": "Text capabilities for string manipulation, formatting, and text processing",
      "hasSideEffects": false,
      "id": "text",
      "integrationIds": [],
      "name": "Text",
      "supportsConnections": false
    },
    {
      "capabilities": [
        {
          "description": "Parse XML bytes into a JSON structure",
          "displayName": "Parse XML",
          "hasSideEffects": false,
          "id": "from-xml",
          "inputType": "FromXmlInput",
          "inputs": [
            {
              "description": "Raw XML data as bytes, base64 encoded string, or file data object",
              "displayName": "XML Data",
              "name": "data",
              "required": true,
              "type": "string"
            },
            {
              "description": "Character encoding of the XML data",
              "displayName": "Encoding",
              "example": "UTF-8",
              "name": "encoding",
              "required": false,
              "type": "string"
            },
            {
              "default": true,
              "description": "Whether to preserve text nodes in the output",
              "displayName": "Preserve Text",
              "example": "true",
              "name": "preserve_text",
              "required": false,
              "type": "boolean"
            },
            {
              "default": true,
              "description": "Whether to include element attributes in the output",
              "displayName": "Include Attributes",
              "example": "true",
              "name": "include_attributes",
              "required": false,
              "type": "boolean"
            },
            {
              "default": true,
              "description": "Whether to trim whitespace from text content",
              "displayName": "Trim Text",
              "example": "true",
              "name": "trim_text",
              "required": false,
              "type": "boolean"
            }
          ],
          "isIdempotent": true,
          "name": "from_xml",
          "output": {
            "type": "any"
          },
          "rateLimited": false
        }
      ],
      "description": "XML capabilities for parsing and working with XML data",
      "hasSideEffects": false,
      "id": "xml",
      "integrationIds": [],
      "name": "Xml",
      "supportsConnections": false
    },
    {
      "capabilities": [
        {
          "description": "Convert a Unix timestamp (seconds or milliseconds) to an ISO 8601 date string",
          "displayName": "Unix Timestamp to Date",
          "hasSideEffects": false,
          "id": "unix-to-date",
          "inputType": "UnixToDateInput",
          "inputs": [
            {
              "description": "Unix timestamp in seconds or milliseconds",
              "displayName": "Timestamp",
              "example": "1705329000",
              "name": "timestamp",
              "required": false,
              "type": "integer"
            },
            {
              "description": "If true, timestamp is in milliseconds; if false, in seconds (default: auto-detect)",
              "displayName": "Is Milliseconds",
              "example": "false",
              "name": "is_milliseconds",
              "required": false,
              "type": "boolean"
            },
            {
              "description": "Output timezone (e.g., 'America/New_York', '+05:30'). Default: UTC",
              "displayName": "Timezone",
              "example": "UTC",
              "name": "timezone",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "unix_to_date",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Convert a date to Unix timestamp (seconds or milliseconds)",
          "displayName": "Date to Unix Timestamp",
          "hasSideEffects": false,
          "id": "date-to-unix",
          "inputType": "DateToUnixInput",
          "inputs": [
            {
              "description": "The date to convert (ISO 8601, Unix timestamp, or common formats)",
              "displayName": "Date",
              "example": "2024-01-15T14:30:00Z",
              "name": "date",
              "required": false,
              "type": "string"
            },
            {
              "default": false,
              "description": "If true, returns Unix timestamp in milliseconds instead of seconds (default: false)",
              "displayName": "Milliseconds",
              "example": "false",
              "name": "milliseconds",
              "required": false,
              "type": "boolean"
            }
          ],
          "isIdempotent": true,
          "name": "date_to_unix",
          "output": {
            "displayName": "Unix Timestamp Result",
            "fields": [
              {
                "description": "Unix timestamp (seconds or milliseconds based on input)",
                "displayName": "Timestamp",
                "example": "1705329000",
                "name": "timestamp",
                "type": "integer"
              },
              {
                "description": "True if timestamp is in milliseconds, false if seconds",
                "displayName": "Is Milliseconds",
                "example": "false",
                "name": "is_milliseconds",
                "type": "boolean"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Round a date to the nearest unit (floor, ceil, or round)",
          "displayName": "Round Date",
          "hasSideEffects": false,
          "id": "round-date",
          "inputType": "RoundDateInput",
          "inputs": [
            {
              "description": "The date to round (ISO 8601, Unix timestamp, or common formats)",
              "displayName": "Date",
              "example": "2024-01-15T14:37:42Z",
              "name": "date",
              "required": false,
              "type": "string"
            },
            {
              "description": "Time unit to round to (years, months, weeks, days, hours, minutes, seconds)",
              "displayName": "Unit",
              "enum": [
                "years",
                "months",
                "weeks",
                "days",
                "hours",
                "minutes",
                "seconds"
              ],
              "example": "hours",
              "name": "unit",
              "required": false,
              "type": "string"
            },
            {
              "description": "Rounding mode (floor, ceil, round)",
              "displayName": "Mode",
              "enum": [
                "floor",
                "ceil",
                "round"
              ],
              "example": "floor",
              "name": "mode",
              "required": false,
              "type": "string"
            },
            {
              "description": "Timezone for rounding. Default: UTC",
              "displayName": "Timezone",
              "example": "UTC",
              "name": "timezone",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "round_date",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Extract a specific component (year, month, day, hour, etc.) from a date",
          "displayName": "Extract Part of Date",
          "hasSideEffects": false,
          "id": "extract-date-part",
          "inputType": "ExtractDatePartInput",
          "inputs": [
            {
              "description": "The date to extract from (ISO 8601, Unix timestamp, or common formats)",
              "displayName": "Date",
              "example": "2024-01-15T14:30:00Z",
              "name": "date",
              "required": false,
              "type": "string"
            },
            {
              "description": "Date part to extract (year, month, week, day, hour, minute, second, etc.)",
              "displayName": "Part",
              "enum": [
                "year",
                "month",
                "week",
                "day",
                "day-of-week",
                "day-of-year",
                "hour",
                "minute",
                "second",
                "millisecond",
                "quarter"
              ],
              "example": "year",
              "name": "part",
              "required": false,
              "type": "string"
            },
            {
              "description": "Timezone for extraction. Default: UTC",
              "displayName": "Timezone",
              "example": "America/New_York",
              "name": "timezone",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "extract_date_part",
          "output": {
            "type": "integer"
          },
          "rateLimited": false
        },
        {
          "description": "Calculate the difference between two dates in the specified unit",
          "displayName": "Get Time Between Dates",
          "hasSideEffects": false,
          "id": "get-time-between",
          "inputType": "GetTimeBetweenInput",
          "inputs": [
            {
              "description": "The start date (ISO 8601, Unix timestamp, or common formats)",
              "displayName": "Start Date",
              "example": "2024-01-01T00:00:00Z",
              "name": "start_date",
              "required": false,
              "type": "string"
            },
            {
              "description": "The end date (ISO 8601, Unix timestamp, or common formats)",
              "displayName": "End Date",
              "example": "2024-01-15T00:00:00Z",
              "name": "end_date",
              "required": false,
              "type": "string"
            },
            {
              "description": "Unit for the result (years, months, weeks, days, hours, minutes, seconds)",
              "displayName": "Unit",
              "enum": [
                "years",
                "months",
                "weeks",
                "days",
                "hours",
                "minutes",
                "seconds"
              ],
              "example": "days",
              "name": "unit",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "get_time_between",
          "output": {
            "displayName": "Time Between Result",
            "fields": [
              {
                "description": "The difference in the specified unit",
                "displayName": "Difference",
                "example": "14",
                "name": "difference",
                "type": "integer"
              },
              {
                "description": "The unit of the difference",
                "displayName": "Unit",
                "example": "days",
                "name": "unit",
                "type": "string"
              },
              {
                "description": "Exact difference in milliseconds",
                "displayName": "Exact Milliseconds",
                "example": "1209600000",
                "name": "exact_ms",
                "type": "integer"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Subtract a duration (years, months, weeks, days, hours, minutes, seconds) from a date",
          "displayName": "Subtract from Date",
          "hasSideEffects": false,
          "id": "subtract-from-date",
          "inputType": "SubtractFromDateInput",
          "inputs": [
            {
              "description": "The date to subtract from (ISO 8601, Unix timestamp, or common formats)",
              "displayName": "Date",
              "example": "2024-01-15T14:30:00Z",
              "name": "date",
              "required": false,
              "type": "string"
            },
            {
              "description": "Amount to subtract",
              "displayName": "Amount",
              "example": "3",
              "name": "amount",
              "required": false,
              "type": "integer"
            },
            {
              "description": "Time unit (years, months, weeks, days, hours, minutes, seconds)",
              "displayName": "Unit",
              "enum": [
                "years",
                "months",
                "weeks",
                "days",
                "hours",
                "minutes",
                "seconds"
              ],
              "example": "months",
              "name": "unit",
              "required": false,
              "type": "string"
            },
            {
              "description": "Timezone for the operation. Default: UTC",
              "displayName": "Timezone",
              "example": "UTC",
              "name": "timezone",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "subtract_from_date",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Add a duration (years, months, weeks, days, hours, minutes, seconds) to a date",
          "displayName": "Add to Date",
          "hasSideEffects": false,
          "id": "add-to-date",
          "inputType": "AddToDateInput",
          "inputs": [
            {
              "description": "The date to add to (ISO 8601, Unix timestamp, or common formats)",
              "displayName": "Date",
              "example": "2024-01-15T14:30:00Z",
              "name": "date",
              "required": false,
              "type": "string"
            },
            {
              "description": "Amount to add (positive) or subtract (negative)",
              "displayName": "Amount",
              "example": "7",
              "name": "amount",
              "required": false,
              "type": "integer"
            },
            {
              "description": "Time unit (years, months, weeks, days, hours, minutes, seconds)",
              "displayName": "Unit",
              "enum": [
                "years",
                "months",
                "weeks",
                "days",
                "hours",
                "minutes",
                "seconds"
              ],
              "example": "days",
              "name": "unit",
              "required": false,
              "type": "string"
            },
            {
              "description": "Timezone for the operation. Default: UTC",
              "displayName": "Timezone",
              "example": "UTC",
              "name": "timezone",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "add_to_date",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Format a date using preset formats or custom Luxon-style tokens (yyyy, MM, dd, HH, mm, ss)",
          "displayName": "Format Date",
          "hasSideEffects": false,
          "id": "format-date",
          "inputType": "FormatDateInput",
          "inputs": [
            {
              "description": "Date to format (ISO 8601, Unix timestamp, or common formats)",
              "displayName": "Date",
              "example": "2024-01-15T14:30:00Z",
              "name": "date",
              "required": false,
              "type": "string"
            },
            {
              "description": "Preset format type",
              "displayName": "Format",
              "enum": [
                "iso8601",
                "rfc2822",
                "date-only",
                "time-only",
                "us-short-date",
                "eu-short-date",
                "long-date",
                "date-time",
                "unix",
                "unix-ms",
                "custom"
              ],
              "example": "iso8601",
              "name": "format",
              "required": false,
              "type": "string"
            },
            {
              "description": "Custom format using Luxon tokens (yyyy, MM, dd, HH, mm, ss)",
              "displayName": "Custom Format",
              "example": "yyyy-MM-dd HH:mm:ss",
              "name": "custom_format",
              "required": false,
              "type": "string"
            },
            {
              "description": "Output timezone (e.g., 'America/New_York', '+05:30'). Default: UTC",
              "displayName": "Timezone",
              "example": "Europe/London",
              "name": "timezone",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "format_date",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Get the current date and optionally time in the specified timezone",
          "displayName": "Get Current Date",
          "hasSideEffects": false,
          "id": "get-current-date",
          "inputType": "GetCurrentDateInput",
          "inputs": [
            {
              "default": true,
              "description": "Whether to include time in the output (default: true)",
              "displayName": "Include Time",
              "example": "true",
              "name": "include_time",
              "required": false,
              "type": "boolean"
            },
            {
              "description": "Timezone (e.g., 'America/New_York', '+05:30', 'UTC'). Default: UTC",
              "displayName": "Timezone",
              "example": "America/New_York",
              "name": "timezone",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "get_current_date",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        }
      ],
      "description": "Date and time capabilities for parsing, formatting, calculating, and manipulating dates",
      "hasSideEffects": false,
      "id": "datetime",
      "integrationIds": [],
      "name": "DateTime",
      "supportsConnections": false
    },
    {
      "capabilities": [
        {
          "description": "Execute an HTTP request with the specified method, URL, headers, and body",
          "displayName": "HTTP Request",
          "hasSideEffects": true,
          "id": "http-request",
          "inputType": "HttpRequestInput",
          "inputs": [
            {
              "description": "HTTP verb for the request",
              "displayName": "Method",
              "enum": [
                "GET",
                "POST",
                "PUT",
                "DELETE",
                "PATCH",
                "HEAD",
                "OPTIONS"
              ],
              "example": "GET",
              "name": "method",
              "required": false,
              "type": "string"
            },
            {
              "description": "Full URL to send the request to",
              "displayName": "URL",
              "example": "https://api.example.com/v1/users",
              "name": "url",
              "required": true,
              "type": "string"
            },
            {
              "default": {},
              "description": "Custom HTTP headers",
              "displayName": "Headers",
              "example": "{\"Authorization\": \"Bearer token123\"}",
              "name": "headers",
              "required": false,
              "type": "object"
            },
            {
              "default": {},
              "description": "URL query parameters",
              "displayName": "Query Parameters",
              "example": "{\"page\": \"1\", \"limit\": \"100\"}",
              "name": "query_parameters",
              "required": false,
              "type": "object"
            },
            {
              "default": null,
              "description": "Request payload",
              "displayName": "Body",
              "example": "{\"name\": \"John Doe\", \"email\": \"john@example.com\"}",
              "name": "body",
              "required": false,
              "type": "string"
            },
            {
              "description": "How to encode the request body",
              "displayName": "Body Type",
              "enum": [
                "json",
                "text",
                "binary",
                "multipart"
              ],
              "example": "json",
              "name": "body_type",
              "required": false,
              "type": "string"
            },
            {
              "default": [],
              "description": "Form fields and files to include in multipart requests",
              "displayName": "Multipart Parts",
              "items": {
                "type": "string"
              },
              "name": "multipart",
              "required": false,
              "type": "array"
            },
            {
              "description": "Expected response format",
              "displayName": "Response Type",
              "enum": [
                "json",
                "text",
                "binary"
              ],
              "example": "json",
              "name": "response_type",
              "required": false,
              "type": "string"
            },
            {
              "default": 30000,
              "description": "Maximum time to wait for response",
              "displayName": "Timeout (ms)",
              "example": "5000",
              "name": "timeout_ms",
              "required": false,
              "type": "integer"
            },
            {
              "default": true,
              "description": "If true (default), non-2xx responses will fail the step. If false, non-2xx responses are returned normally.",
              "displayName": "Fail on Error",
              "example": "true",
              "name": "fail_on_error",
              "required": false,
              "type": "boolean"
            }
          ],
          "isIdempotent": false,
          "name": "http_request",
          "output": {
            "description": "Response from an HTTP request",
            "displayName": "HTTP Response",
            "fields": [
              {
                "description": "HTTP status code (e.g., 200, 404, 500)",
                "displayName": "Status Code",
                "example": "200",
                "name": "status_code",
                "type": "string"
              },
              {
                "description": "Response headers as key-value pairs",
                "displayName": "Headers",
                "name": "headers",
                "type": "object"
              },
              {
                "description": "Response body (JSON object, text string, or base64-encoded binary depending on response_type)",
                "displayName": "Body",
                "name": "body",
                "type": "string"
              },
              {
                "description": "True if the status code is in the 2xx range",
                "displayName": "Success",
                "example": "true",
                "name": "success",
                "type": "boolean"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        }
      ],
      "description": "HTTP capabilities for making web requests with JSON/text/binary support (has side effects)",
      "hasSideEffects": true,
      "id": "http",
      "integrationIds": [
        "bearer",
        "api_key",
        "basic_auth"
      ],
      "name": "HTTP",
      "supportsConnections": true
    },
    {
      "capabilities": [
        {
          "description": "Delete a file from SFTP",
          "displayName": "Delete File",
          "hasSideEffects": true,
          "id": "sftp-delete-file",
          "inputType": "SftpDeleteFileInput",
          "inputs": [
            {
              "description": "Full path to the file to delete",
              "displayName": "File Path",
              "example": "/data/uploads/old-file.txt",
              "name": "path",
              "required": true,
              "type": "string"
            }
          ],
          "isIdempotent": false,
          "name": "sftp_delete_file",
          "output": {
            "description": "Response from deleting a file via SFTP",
            "displayName": "Delete File Response",
            "fields": [
              {
                "description": "Whether the deletion was successful",
                "displayName": "Success",
                "example": "true",
                "name": "success",
                "type": "boolean"
              },
              {
                "description": "The path of the deleted file",
                "displayName": "Path",
                "example": "/home/user/documents/old-file.txt",
                "name": "path",
                "type": "string"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Upload a file to SFTP",
          "displayName": "Upload File",
          "hasSideEffects": true,
          "id": "sftp-upload-file",
          "inputType": "SftpUploadFileInput",
          "inputs": [
            {
              "description": "Full path where the file should be uploaded",
              "displayName": "Destination Path",
              "example": "/data/uploads/new-file.txt",
              "name": "path",
              "required": true,
              "type": "string"
            },
            {
              "description": "Content to upload (plain text or base64-encoded binary)",
              "displayName": "File Content",
              "example": "Hello, World!",
              "name": "content",
              "required": true,
              "type": "string"
            },
            {
              "description": "Format of the content: \"text\" for plain text, \"base64\" for binary data",
              "displayName": "Content Format",
              "example": "text",
              "name": "content_format",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": false,
          "name": "sftp_upload_file",
          "output": {
            "type": "integer"
          },
          "rateLimited": false
        },
        {
          "description": "Download a file from SFTP and return its content",
          "displayName": "Download File",
          "hasSideEffects": false,
          "id": "sftp-download-file",
          "inputType": "SftpDownloadFileInput",
          "inputs": [
            {
              "description": "Full path to the file to download",
              "displayName": "File Path",
              "example": "/data/uploads/document.pdf",
              "name": "path",
              "required": true,
              "type": "string"
            },
            {
              "description": "Format for the downloaded content: \"text\" for text files, \"base64\" for binary files",
              "displayName": "Response Format",
              "example": "text",
              "name": "response_format",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "sftp_download_file",
          "output": {
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "List files and directories in an SFTP directory",
          "displayName": "List Files",
          "hasSideEffects": false,
          "id": "sftp-list-files",
          "inputType": "SftpListFilesInput",
          "inputs": [
            {
              "description": "Path to the directory to list (use \"/\" for root)",
              "displayName": "Directory Path",
              "example": "/data/uploads",
              "name": "path",
              "required": true,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "sftp_list_files",
          "output": {
            "type": "array"
          },
          "rateLimited": false
        }
      ],
      "description": "SFTP capabilities for secure file transfer operations - list, download, upload, and delete files on remote servers (has side effects)",
      "hasSideEffects": true,
      "id": "sftp",
      "integrationIds": [
        "sftp"
      ],
      "name": "Sftp",
      "supportsConnections": true
    },
    {
      "capabilities": [
        {
          "description": "List all files and directories in an archive without extracting",
          "displayName": "List Archive",
          "hasSideEffects": false,
          "id": "list-archive",
          "inputType": "ListArchiveInput",
          "inputs": [
            {
              "description": "The archive file to list contents of",
              "displayName": "Archive",
              "name": "archive",
              "required": true,
              "type": "string"
            },
            {
              "description": "Archive format (auto-detected from content if not specified)",
              "displayName": "Format",
              "name": "format",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "list_archive",
          "output": {
            "description": "Contents of an archive",
            "displayName": "List Archive Output",
            "fields": [
              {
                "description": "List of files and directories",
                "displayName": "Entries",
                "name": "entries",
                "type": "array"
              },
              {
                "description": "Total number of entries",
                "displayName": "Total Count",
                "name": "total_count",
                "type": "integer"
              },
              {
                "description": "Total uncompressed size in bytes",
                "displayName": "Total Size",
                "name": "total_size",
                "type": "integer"
              },
              {
                "description": "Archive format",
                "displayName": "Format",
                "name": "format",
                "type": "string"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Extract a single file from an archive by its path",
          "displayName": "Extract File",
          "hasSideEffects": false,
          "id": "extract-file",
          "inputType": "ExtractFileInput",
          "inputs": [
            {
              "description": "The archive file containing the target file",
              "displayName": "Archive",
              "name": "archive",
              "required": true,
              "type": "string"
            },
            {
              "description": "Path of the file to extract (e.g., 'data/report.csv')",
              "displayName": "File Path",
              "name": "file_path",
              "required": true,
              "type": "string"
            },
            {
              "description": "Archive format (auto-detected from content if not specified)",
              "displayName": "Format",
              "name": "format",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "extract_file",
          "output": {
            "description": "Base64-encoded file with optional metadata",
            "displayName": "File Data",
            "fields": [
              {
                "description": "Base64-encoded file content",
                "displayName": "Content",
                "name": "content",
                "type": "string"
              },
              {
                "description": "Original filename (optional)",
                "displayName": "Filename",
                "name": "filename",
                "nullable": true,
                "type": "string"
              },
              {
                "description": "MIME type (e.g., 'text/plain', 'text/csv', 'application/xml')",
                "displayName": "MIME Type",
                "name": "mime_type",
                "nullable": true,
                "type": "string"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Extract all files from an archive",
          "displayName": "Extract Archive",
          "hasSideEffects": false,
          "id": "extract-archive",
          "inputType": "ExtractArchiveInput",
          "inputs": [
            {
              "description": "The archive file to extract",
              "displayName": "Archive",
              "name": "archive",
              "required": true,
              "type": "string"
            },
            {
              "description": "Archive format (auto-detected from content if not specified)",
              "displayName": "Format",
              "name": "format",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "extract_archive",
          "output": {
            "description": "Result of extracting all files from an archive",
            "displayName": "Extract Archive Output",
            "fields": [
              {
                "description": "List of all extracted files",
                "displayName": "Files",
                "name": "files",
                "type": "array"
              },
              {
                "description": "Total number of files extracted",
                "displayName": "Count",
                "name": "count",
                "type": "integer"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        },
        {
          "description": "Create an archive from one or more files",
          "displayName": "Create Archive",
          "hasSideEffects": false,
          "id": "create-archive",
          "inputType": "CreateArchiveInput",
          "inputs": [
            {
              "description": "List of files to include in the archive",
              "displayName": "Files",
              "items": {
                "type": "string"
              },
              "name": "files",
              "required": true,
              "type": "array"
            },
            {
              "description": "Archive format: 'zip' (default)",
              "displayName": "Format",
              "name": "format",
              "required": false,
              "type": "string"
            },
            {
              "description": "Compression level from 0 (none) to 9 (maximum)",
              "displayName": "Compression Level",
              "name": "compression_level",
              "required": false,
              "type": "string"
            },
            {
              "description": "Filename for the output archive (e.g., 'data.zip')",
              "displayName": "Archive Name",
              "name": "archive_name",
              "required": false,
              "type": "string"
            }
          ],
          "isIdempotent": true,
          "name": "create_archive",
          "output": {
            "description": "Base64-encoded file with optional metadata",
            "displayName": "File Data",
            "fields": [
              {
                "description": "Base64-encoded file content",
                "displayName": "Content",
                "name": "content",
                "type": "string"
              },
              {
                "description": "Original filename (optional)",
                "displayName": "Filename",
                "name": "filename",
                "nullable": true,
                "type": "string"
              },
              {
                "description": "MIME type (e.g., 'text/plain', 'text/csv', 'application/xml')",
                "displayName": "MIME Type",
                "name": "mime_type",
                "nullable": true,
                "type": "string"
              }
            ],
            "type": "string"
          },
          "rateLimited": false
        }
      ],
      "description": "Archive capabilities for creating and extracting ZIP archives, listing contents, and extracting individual files",
      "hasSideEffects": false,
      "id": "compression",
      "integrationIds": [],
      "name": "Compression",
      "supportsConnections": false
    }
  ],
  "connectionTypes": [
    {
      "category": "file_storage",
      "description": "Connect to an SFTP server for file operations",
      "displayName": "SFTP",
      "fields": [
        {
          "default": null,
          "description": "SFTP server hostname or IP address",
          "displayName": "Host",
          "isSecret": false,
          "name": "host",
          "placeholder": "sftp.example.com",
          "required": true,
          "type": "String"
        },
        {
          "default": "22",
          "description": "SFTP server port",
          "displayName": "Port",
          "isSecret": false,
          "name": "port",
          "placeholder": null,
          "required": false,
          "type": "u16"
        },
        {
          "default": null,
          "description": "Username for SFTP authentication",
          "displayName": "Username",
          "isSecret": false,
          "name": "username",
          "placeholder": null,
          "required": true,
          "type": "String"
        },
        {
          "default": null,
          "description": "Password for authentication (optional if using private key)",
          "displayName": "Password",
          "isSecret": true,
          "name": "password",
          "placeholder": null,
          "required": false,
          "type": "String"
        },
        {
          "default": null,
          "description": "Private key in PEM format (optional if using password)",
          "displayName": "Private Key",
          "isSecret": true,
          "name": "private_key",
          "placeholder": null,
          "required": false,
          "type": "String"
        },
        {
          "default": null,
          "description": "Passphrase for the private key (if encrypted)",
          "displayName": "Passphrase",
          "isSecret": true,
          "name": "passphrase",
          "placeholder": null,
          "required": false,
          "type": "String"
        }
      ],
      "integrationId": "sftp"
    },
    {
      "category": "http",
      "description": "Authenticate HTTP requests using a Bearer token",
      "displayName": "HTTP Bearer Token",
      "fields": [
        {
          "default": null,
          "description": "Bearer token for authentication",
          "displayName": "Token",
          "isSecret": true,
          "name": "token",
          "placeholder": null,
          "required": true,
          "type": "String"
        },
        {
          "default": null,
          "description": "Optional base URL prefix for all requests",
          "displayName": "Base URL",
          "isSecret": false,
          "name": "base_url",
          "placeholder": "https://api.example.com",
          "required": false,
          "type": "String"
        }
      ],
      "integrationId": "http_bearer"
    },
    {
      "category": "http",
      "description": "Authenticate HTTP requests using an API key header",
      "displayName": "HTTP API Key",
      "fields": [
        {
          "default": null,
          "description": "API key value",
          "displayName": "API Key",
          "isSecret": true,
          "name": "api_key",
          "placeholder": null,
          "required": true,
          "type": "String"
        },
        {
          "default": "X-API-Key",
          "description": "Header name for the API key",
          "displayName": "Header Name",
          "isSecret": false,
          "name": "header_name",
          "placeholder": null,
          "required": false,
          "type": "String"
        },
        {
          "default": null,
          "description": "Optional base URL prefix for all requests",
          "displayName": "Base URL",
          "isSecret": false,
          "name": "base_url",
          "placeholder": "https://api.example.com",
          "required": false,
          "type": "String"
        }
      ],
      "integrationId": "http_api_key"
    }
  ],
  "dslSchema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "definitions": {
      "ChildVersion": {
        "anyOf": [
          {
            "description": "Use latest version",
            "type": "string"
          },
          {
            "description": "Use specific version number",
            "format": "int32",
            "type": "integer"
          }
        ],
        "description": "Child scenario version specification"
      },
      "CompositeInner": {
        "anyOf": [
          {
            "additionalProperties": {
              "$ref": "#/definitions/MappingValue"
            },
            "description": "Object composite: each field maps to a MappingValue",
            "type": "object"
          },
          {
            "description": "Array composite: each element is a MappingValue",
            "items": {
              "$ref": "#/definitions/MappingValue"
            },
            "type": "array"
          }
        ],
        "description": "Inner value for CompositeValue - either an object or array of MappingValues."
      },
      "ConditionArgument": {
        "anyOf": [
          {
            "allOf": [
              {
                "$ref": "#/definitions/ConditionExpression"
              }
            ],
            "description": "Nested expression (for AND, OR, NOT, or any operator that takes expressions)"
          },
          {
            "allOf": [
              {
                "$ref": "#/definitions/MappingValue"
              }
            ],
            "description": "A mapping value - either reference (data path) or immediate (literal)"
          }
        ],
        "description": "An argument to a condition operation. Can be a nested expression or a mapping value (reference or immediate).\n\nUses untagged serialization to avoid duplicate \"type\" fields when nesting expressions (since both ConditionExpression and MappingValue use internally-tagged enums). The deserializer distinguishes variants by structure: - Expression: has \"op\" and \"arguments\" fields (from ConditionExpression::Operation) or has \"valueType\" field (from ConditionExpression::Value -> MappingValue) - Value: has \"valueType\" field (from MappingValue)"
      },
      "ConditionExpression": {
        "description": "A condition expression for conditional branching. Can be either an operation (with operator and arguments) or a simple value check.",
        "oneOf": [
          {
            "description": "A comparison or logical operation",
            "properties": {
              "arguments": {
                "description": "The arguments to the operator (1+ depending on operator). Each argument can be a nested expression or a value (reference/immediate).",
                "items": {
                  "$ref": "#/definitions/ConditionArgument"
                },
                "type": "array"
              },
              "op": {
                "allOf": [
                  {
                    "$ref": "#/definitions/ConditionOperator"
                  }
                ],
                "description": "The operator (AND, OR, GT, EQ, STARTS_WITH, etc.)"
              },
              "type": {
                "enum": [
                  "operation"
                ],
                "type": "string"
              }
            },
            "required": [
              "arguments",
              "op",
              "type"
            ],
            "type": "object"
          },
          {
            "description": "A direct value (reference or immediate) - evaluated as truthy/falsy",
            "oneOf": [
              {
                "description": "Reference to data at a path (e.g., \"data.user.name\", \"variables.count\")",
                "properties": {
                  "default": {
                    "description": "Default value to use when the reference path returns null or doesn't exist. This allows graceful handling of optional fields while providing fallback values."
                  },
                  "type": {
                    "anyOf": [
                      {
                        "$ref": "#/definitions/ValueType"
                      },
                      {
                        "type": "null"
                      }
                    ],
                    "description": "Expected type hint for the referenced value. Used when the source type is unknown (e.g., HTTP response body). If omitted, the value is passed through as-is (typically as JSON)."
                  },
                  "value": {
                    "description": "Path to the data using dot notation (e.g., \"data.user.name\")",
                    "type": "string"
                  },
                  "valueType": {
                    "enum": [
                      "reference"
                    ],
                    "type": "string"
                  }
                },
                "required": [
                  "value",
                  "valueType"
                ],
                "type": "object"
              },
              {
                "description": "Immediate/literal value (string, number, boolean, object, array)",
                "properties": {
                  "value": {
                    "description": "The literal value (string, number, boolean, object, or array)"
                  },
                  "valueType": {
                    "enum": [
                      "immediate"
                    ],
                    "type": "string"
                  }
                },
                "required": [
                  "value",
                  "valueType"
                ],
                "type": "object"
              },
              {
                "description": "Composite value - structured object or array with nested MappingValues",
                "properties": {
                  "value": {
                    "allOf": [
                      {
                        "$ref": "#/definitions/CompositeInner"
                      }
                    ],
                    "description": "Either an object (HashMap) or array (Vec) of nested MappingValues."
                  },
                  "valueType": {
                    "enum": [
                      "composite"
                    ],
                    "type": "string"
                  }
                },
                "required": [
                  "value",
                  "valueType"
                ],
                "type": "object"
              }
            ],
            "properties": {
              "type": {
                "enum": [
                  "value"
                ],
                "type": "string"
              }
            },
            "required": [
              "type"
            ],
            "type": "object"
          }
        ]
      },
      "ConditionOperator": {
        "description": "Condition expression operators",
        "enum": [
          "AND",
          "OR",
          "NOT",
          "GT",
          "GTE",
          "LT",
          "LTE",
          "EQ",
          "NE",
          "STARTS_WITH",
          "ENDS_WITH",
          "CONTAINS",
          "IN",
          "NOT_IN",
          "LENGTH",
          "IS_DEFINED",
          "IS_EMPTY",
          "IS_NOT_EMPTY"
        ],
        "title": "ConditionOperator",
        "type": "string"
      },
      "ExecutionGraph": {
        "description": "The execution graph containing all steps and control flow",
        "properties": {
          "description": {
            "description": "Detailed description of what the scenario does",
            "type": [
              "string",
              "null"
            ]
          },
          "edges": {
            "description": "UI edge positions for the visual scenario editor. This is opaque data managed by the UI - the runtime does not interpret this field. Typically contains an array of edge objects connecting nodes. Not used in compilation or execution."
          },
          "entryPoint": {
            "description": "ID of the entry point step (step with no incoming edges)",
            "type": "string"
          },
          "executionPlan": {
            "description": "Ordered list of step transitions defining control flow",
            "items": {
              "$ref": "#/definitions/ExecutionPlanEdge"
            },
            "type": "array"
          },
          "inputSchema": {
            "additionalProperties": {
              "$ref": "#/definitions/SchemaField"
            },
            "description": "Schema defining expected input data structure for this scenario. Keys are field names, values define the field type and constraints.",
            "type": "object"
          },
          "name": {
            "description": "Human-readable name for the scenario",
            "type": [
              "string",
              "null"
            ]
          },
          "nodes": {
            "description": "UI node positions for the visual scenario editor. This is opaque data managed by the UI - the runtime does not interpret this field. Typically contains an array of node objects with position coordinates. Not used in compilation or execution."
          },
          "notes": {
            "description": "Visual annotations for UI (not used in compilation)",
            "items": {
              "$ref": "#/definitions/Note"
            },
            "type": [
              "array",
              "null"
            ]
          },
          "outputSchema": {
            "additionalProperties": {
              "$ref": "#/definitions/SchemaField"
            },
            "description": "Schema defining output data structure for this scenario. Keys are field names, values define the field type and constraints.",
            "type": "object"
          },
          "steps": {
            "additionalProperties": {
              "$ref": "#/definitions/Step"
            },
            "description": "Map of step IDs to step definitions",
            "type": "object"
          },
          "variables": {
            "additionalProperties": {
              "$ref": "#/definitions/Variable"
            },
            "description": "Constant variables available as `variables.<name>` during execution. These are static values defined at design time, not overridable at runtime. Keys are variable names, values contain type and value.",
            "type": "object"
          }
        },
        "required": [
          "entryPoint",
          "steps"
        ],
        "type": "object"
      },
      "ExecutionPlanEdge": {
        "description": "An edge in the execution plan defining control flow",
        "properties": {
          "fromStep": {
            "description": "Source step ID",
            "type": "string"
          },
          "label": {
            "description": "Edge label for control flow: - `\"true\"`/`\"false\"` for Conditional step branches - `\"onError\"` for error handling transition (step failed after retries) - `None` or empty for normal sequential flow",
            "type": [
              "string",
              "null"
            ]
          },
          "toStep": {
            "description": "Target step ID",
            "type": "string"
          }
        },
        "required": [
          "fromStep",
          "toStep"
        ],
        "type": "object"
      },
      "LogLevel": {
        "description": "Log level for Log steps",
        "oneOf": [
          {
            "description": "Debug level - verbose diagnostic information",
            "enum": [
              "debug"
            ],
            "type": "string"
          },
          {
            "description": "Info level - general informational messages",
            "enum": [
              "info"
            ],
            "type": "string"
          },
          {
            "description": "Warn level - warning conditions",
            "enum": [
              "warn"
            ],
            "type": "string"
          },
          {
            "description": "Error level - error conditions",
            "enum": [
              "error"
            ],
            "type": "string"
          }
        ]
      },
      "MappingValue": {
        "description": "A mapping value specifies how to obtain data for a field.\n\nUses explicit `valueType` discriminator: - `reference`: Value is a path to data (e.g., \"data.name\", \"steps.step1.outputs.result\") - `immediate`: Value is a literal (string, number, boolean, object, array) - `composite`: Value is a structured object or array with nested MappingValues\n\nExample reference: `{ \"valueType\": \"reference\", \"value\": \"data.user.name\" }` Example immediate: `{ \"valueType\": \"immediate\", \"value\": \"Hello World\" }` Example composite: `{ \"valueType\": \"composite\", \"value\": { \"name\": {...}, \"id\": {...} } }`",
        "oneOf": [
          {
            "description": "Reference to data at a path (e.g., \"data.user.name\", \"variables.count\")",
            "properties": {
              "default": {
                "description": "Default value to use when the reference path returns null or doesn't exist. This allows graceful handling of optional fields while providing fallback values."
              },
              "type": {
                "anyOf": [
                  {
                    "$ref": "#/definitions/ValueType"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Expected type hint for the referenced value. Used when the source type is unknown (e.g., HTTP response body). If omitted, the value is passed through as-is (typically as JSON)."
              },
              "value": {
                "description": "Path to the data using dot notation (e.g., \"data.user.name\")",
                "type": "string"
              },
              "valueType": {
                "enum": [
                  "reference"
                ],
                "type": "string"
              }
            },
            "required": [
              "value",
              "valueType"
            ],
            "type": "object"
          },
          {
            "description": "Immediate/literal value (string, number, boolean, object, array)",
            "properties": {
              "value": {
                "description": "The literal value (string, number, boolean, object, or array)"
              },
              "valueType": {
                "enum": [
                  "immediate"
                ],
                "type": "string"
              }
            },
            "required": [
              "value",
              "valueType"
            ],
            "type": "object"
          },
          {
            "description": "Composite value - structured object or array with nested MappingValues",
            "properties": {
              "value": {
                "allOf": [
                  {
                    "$ref": "#/definitions/CompositeInner"
                  }
                ],
                "description": "Either an object (HashMap) or array (Vec) of nested MappingValues."
              },
              "valueType": {
                "enum": [
                  "composite"
                ],
                "type": "string"
              }
            },
            "required": [
              "value",
              "valueType"
            ],
            "type": "object"
          }
        ]
      },
      "MemoryTier": {
        "description": "Memory allocation tier for scenario execution",
        "enum": [
          "S",
          "M",
          "L",
          "XL"
        ],
        "type": "string"
      },
      "Note": {
        "description": "Visual annotation for scenario editor UI",
        "properties": {
          "id": {
            "type": [
              "string",
              "null"
            ]
          },
          "position": {
            "anyOf": [
              {
                "$ref": "#/definitions/Position"
              },
              {
                "type": "null"
              }
            ]
          },
          "text": {
            "type": [
              "string",
              "null"
            ]
          }
        },
        "type": "object"
      },
      "Position": {
        "description": "Position coordinates for UI elements",
        "properties": {
          "x": {
            "format": "double",
            "type": "number"
          },
          "y": {
            "format": "double",
            "type": "number"
          }
        },
        "required": [
          "x",
          "y"
        ],
        "type": "object"
      },
      "SchemaField": {
        "description": "A field definition for input/output schemas.\n\nUsed to define the structure of scenario inputs and outputs. The field name is the key in the HashMap.",
        "properties": {
          "default": {
            "description": "Default value if not provided"
          },
          "description": {
            "description": "Human-readable description",
            "type": [
              "string",
              "null"
            ]
          },
          "enum": {
            "description": "Allowed values (enum)",
            "items": true,
            "type": [
              "array",
              "null"
            ]
          },
          "example": {
            "description": "Example value for documentation"
          },
          "items": {
            "anyOf": [
              {
                "$ref": "#/definitions/SchemaField"
              },
              {
                "type": "null"
              }
            ],
            "description": "For array types, the type of items in the array"
          },
          "required": {
            "default": false,
            "description": "Whether this field is required",
            "type": "boolean"
          },
          "type": {
            "allOf": [
              {
                "$ref": "#/definitions/SchemaFieldType"
              }
            ],
            "description": "Field type (string, integer, number, boolean, array, object)"
          }
        },
        "required": [
          "type"
        ],
        "title": "SchemaField",
        "type": "object"
      },
      "SchemaFieldType": {
        "description": "Data types for schema fields. Used in input/output schema definitions.",
        "oneOf": [
          {
            "description": "String value",
            "enum": [
              "string"
            ],
            "type": "string"
          },
          {
            "description": "Integer number",
            "enum": [
              "integer"
            ],
            "type": "string"
          },
          {
            "description": "Floating point number",
            "enum": [
              "number"
            ],
            "type": "string"
          },
          {
            "description": "Boolean value",
            "enum": [
              "boolean"
            ],
            "type": "string"
          },
          {
            "description": "Array of values (use `items` to specify element type)",
            "enum": [
              "array"
            ],
            "type": "string"
          },
          {
            "description": "JSON object",
            "enum": [
              "object"
            ],
            "type": "string"
          },
          {
            "description": "Base64-encoded file data (FileData structure with content, filename, mimeType)",
            "enum": [
              "file"
            ],
            "type": "string"
          }
        ],
        "title": "SchemaFieldType"
      },
      "SplitConfig": {
        "description": "Configuration for a Split step. Defines the array to iterate over and execution options.",
        "properties": {
          "dontStopOnFailed": {
            "description": "Continue execution even if some iterations fail",
            "type": [
              "boolean",
              "null"
            ]
          },
          "maxRetries": {
            "description": "Maximum retry attempts for the split operation (default: 0 - no retries)",
            "format": "uint32",
            "minimum": 0.0,
            "type": [
              "integer",
              "null"
            ]
          },
          "parallelism": {
            "description": "Maximum concurrent iterations (0 = unlimited)",
            "format": "uint32",
            "minimum": 0.0,
            "type": [
              "integer",
              "null"
            ]
          },
          "retryDelay": {
            "description": "Base delay between retries in milliseconds (default: 1000)",
            "format": "uint64",
            "minimum": 0.0,
            "type": [
              "integer",
              "null"
            ]
          },
          "sequential": {
            "description": "Execute iterations sequentially instead of in parallel",
            "type": [
              "boolean",
              "null"
            ]
          },
          "timeout": {
            "description": "Step timeout in milliseconds. If exceeded, step fails.",
            "format": "uint64",
            "minimum": 0.0,
            "type": [
              "integer",
              "null"
            ]
          },
          "value": {
            "allOf": [
              {
                "$ref": "#/definitions/MappingValue"
              }
            ],
            "description": "The array to iterate over"
          },
          "variables": {
            "additionalProperties": {
              "$ref": "#/definitions/MappingValue"
            },
            "description": "Additional variables to pass to each iteration's subgraph",
            "type": [
              "object",
              "null"
            ]
          }
        },
        "required": [
          "value"
        ],
        "title": "SplitConfig",
        "type": "object"
      },
      "Step": {
        "description": "Union of all step types, discriminated by stepType field",
        "oneOf": [
          {
            "description": "Exit point - defines scenario outputs",
            "properties": {
              "id": {
                "description": "Unique step identifier",
                "type": "string"
              },
              "inputMapping": {
                "additionalProperties": {
                  "$ref": "#/definitions/MappingValue"
                },
                "description": "Maps scenario data to output values",
                "type": [
                  "object",
                  "null"
                ]
              },
              "name": {
                "description": "Human-readable step name",
                "type": [
                  "string",
                  "null"
                ]
              },
              "stepType": {
                "enum": [
                  "Finish"
                ],
                "type": "string"
              }
            },
            "required": [
              "id",
              "stepType"
            ],
            "type": "object"
          },
          {
            "description": "Executes an agent capability",
            "properties": {
              "agentId": {
                "description": "Agent name (e.g., \"utils\", \"transform\", \"http\", \"sftp\")",
                "type": "string"
              },
              "capabilityId": {
                "description": "Capability name (e.g., \"random-double\", \"group-by\", \"http-request\")",
                "type": "string"
              },
              "connectionId": {
                "description": "Connection ID for agents requiring authentication",
                "type": [
                  "string",
                  "null"
                ]
              },
              "id": {
                "description": "Unique step identifier",
                "type": "string"
              },
              "inputMapping": {
                "additionalProperties": {
                  "$ref": "#/definitions/MappingValue"
                },
                "description": "Maps data to agent capability inputs",
                "type": [
                  "object",
                  "null"
                ]
              },
              "maxRetries": {
                "description": "Maximum retry attempts (default: 3)",
                "format": "uint32",
                "minimum": 0.0,
                "type": [
                  "integer",
                  "null"
                ]
              },
              "name": {
                "description": "Human-readable step name",
                "type": [
                  "string",
                  "null"
                ]
              },
              "retryDelay": {
                "description": "Base delay between retries in milliseconds (default: 1000)",
                "format": "uint64",
                "minimum": 0.0,
                "type": [
                  "integer",
                  "null"
                ]
              },
              "stepType": {
                "enum": [
                  "Agent"
                ],
                "type": "string"
              },
              "timeout": {
                "description": "Step timeout in milliseconds. If exceeded, step fails.",
                "format": "uint64",
                "minimum": 0.0,
                "type": [
                  "integer",
                  "null"
                ]
              }
            },
            "required": [
              "agentId",
              "capabilityId",
              "id",
              "stepType"
            ],
            "type": "object"
          },
          {
            "description": "Evaluates conditions and branches",
            "properties": {
              "condition": {
                "allOf": [
                  {
                    "$ref": "#/definitions/ConditionExpression"
                  }
                ],
                "description": "The condition expression to evaluate"
              },
              "id": {
                "description": "Unique step identifier",
                "type": "string"
              },
              "name": {
                "description": "Human-readable step name",
                "type": [
                  "string",
                  "null"
                ]
              },
              "stepType": {
                "enum": [
                  "Conditional"
                ],
                "type": "string"
              }
            },
            "required": [
              "condition",
              "id",
              "stepType"
            ],
            "type": "object"
          },
          {
            "description": "Iterates over an array, executing subgraph for each item",
            "properties": {
              "config": {
                "anyOf": [
                  {
                    "$ref": "#/definitions/SplitConfig"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Split configuration: array to iterate, parallelism settings, error handling"
              },
              "id": {
                "description": "Unique step identifier",
                "type": "string"
              },
              "inputSchema": {
                "additionalProperties": {
                  "$ref": "#/definitions/SchemaField"
                },
                "description": "Schema defining the expected shape of each item in the array. Keys are field names, values define the field type and constraints.",
                "type": "object"
              },
              "name": {
                "description": "Human-readable step name",
                "type": [
                  "string",
                  "null"
                ]
              },
              "outputSchema": {
                "additionalProperties": {
                  "$ref": "#/definitions/SchemaField"
                },
                "description": "Schema defining the expected output from each iteration. Keys are field names, values define the field type and constraints.",
                "type": "object"
              },
              "stepType": {
                "enum": [
                  "Split"
                ],
                "type": "string"
              },
              "subgraph": {
                "allOf": [
                  {
                    "$ref": "#/definitions/ExecutionGraph"
                  }
                ],
                "description": "Nested execution graph for each iteration"
              }
            },
            "required": [
              "id",
              "stepType",
              "subgraph"
            ],
            "title": "SplitStep",
            "type": "object"
          },
          {
            "description": "Multi-way branch based on value matching",
            "properties": {
              "config": {
                "anyOf": [
                  {
                    "$ref": "#/definitions/SwitchConfig"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "Switch configuration: value to switch on, cases, and default"
              },
              "id": {
                "description": "Unique step identifier",
                "type": "string"
              },
              "name": {
                "description": "Human-readable step name",
                "type": [
                  "string",
                  "null"
                ]
              },
              "stepType": {
                "enum": [
                  "Switch"
                ],
                "type": "string"
              }
            },
            "required": [
              "id",
              "stepType"
            ],
            "title": "SwitchStep",
            "type": "object"
          },
          {
            "description": "Executes a nested child scenario",
            "properties": {
              "childScenarioId": {
                "description": "ID of the child scenario to execute",
                "type": "string"
              },
              "childVersion": {
                "allOf": [
                  {
                    "$ref": "#/definitions/ChildVersion"
                  }
                ],
                "description": "Version of child scenario (\"latest\" or specific version number)"
              },
              "id": {
                "description": "Unique step identifier",
                "type": "string"
              },
              "inputMapping": {
                "additionalProperties": {
                  "$ref": "#/definitions/MappingValue"
                },
                "description": "Maps parent data to child scenario inputs",
                "type": [
                  "object",
                  "null"
                ]
              },
              "maxRetries": {
                "description": "Maximum retry attempts (default: 3)",
                "format": "uint32",
                "minimum": 0.0,
                "type": [
                  "integer",
                  "null"
                ]
              },
              "name": {
                "description": "Human-readable step name",
                "type": [
                  "string",
                  "null"
                ]
              },
              "retryDelay": {
                "description": "Base delay between retries in milliseconds (default: 1000)",
                "format": "uint64",
                "minimum": 0.0,
                "type": [
                  "integer",
                  "null"
                ]
              },
              "stepType": {
                "enum": [
                  "StartScenario"
                ],
                "type": "string"
              },
              "timeout": {
                "description": "Step timeout in milliseconds. If exceeded, step fails.",
                "format": "uint64",
                "minimum": 0.0,
                "type": [
                  "integer",
                  "null"
                ]
              }
            },
            "required": [
              "childScenarioId",
              "childVersion",
              "id",
              "stepType"
            ],
            "type": "object"
          },
          {
            "description": "Conditional loop - repeat until condition is false",
            "properties": {
              "condition": {
                "allOf": [
                  {
                    "$ref": "#/definitions/ConditionExpression"
                  }
                ],
                "description": "The condition expression to evaluate before each iteration. Loop continues while condition is true."
              },
              "config": {
                "anyOf": [
                  {
                    "$ref": "#/definitions/WhileConfig"
                  },
                  {
                    "type": "null"
                  }
                ],
                "description": "While loop configuration"
              },
              "id": {
                "description": "Unique step identifier",
                "type": "string"
              },
              "name": {
                "description": "Human-readable step name",
                "type": [
                  "string",
                  "null"
                ]
              },
              "stepType": {
                "enum": [
                  "While"
                ],
                "type": "string"
              },
              "subgraph": {
                "allOf": [
                  {
                    "$ref": "#/definitions/ExecutionGraph"
                  }
                ],
                "description": "Nested execution graph to execute on each iteration"
              }
            },
            "required": [
              "condition",
              "id",
              "stepType",
              "subgraph"
            ],
            "title": "WhileStep",
            "type": "object"
          },
          {
            "description": "Emit custom log/debug events",
            "properties": {
              "context": {
                "additionalProperties": {
                  "$ref": "#/definitions/MappingValue"
                },
                "description": "Additional context data to include in the log event. Keys are field names, values specify how to obtain the data.",
                "type": [
                  "object",
                  "null"
                ]
              },
              "id": {
                "description": "Unique step identifier",
                "type": "string"
              },
              "level": {
                "allOf": [
                  {
                    "$ref": "#/definitions/LogLevel"
                  }
                ],
                "default": "info",
                "description": "Log level"
              },
              "message": {
                "description": "Log message",
                "type": "string"
              },
              "name": {
                "description": "Human-readable step name",
                "type": [
                  "string",
                  "null"
                ]
              },
              "stepType": {
                "enum": [
                  "Log"
                ],
                "type": "string"
              }
            },
            "required": [
              "id",
              "message",
              "stepType"
            ],
            "title": "LogStep",
            "type": "object"
          },
          {
            "description": "Acquire a connection for use with secure agents",
            "properties": {
              "connectionId": {
                "description": "Reference to connection in the connection registry",
                "type": "string"
              },
              "id": {
                "description": "Unique step identifier",
                "type": "string"
              },
              "integrationId": {
                "description": "Type of connection (bearer, api_key, basic_auth, sftp, etc.)",
                "type": "string"
              },
              "name": {
                "description": "Human-readable step name",
                "type": [
                  "string",
                  "null"
                ]
              },
              "stepType": {
                "enum": [
                  "Connection"
                ],
                "type": "string"
              }
            },
            "required": [
              "connectionId",
              "id",
              "integrationId",
              "stepType"
            ],
            "title": "ConnectionStep",
            "type": "object"
          }
        ]
      },
      "SwitchCase": {
        "description": "A single case in a Switch step. Defines a match condition and the output to produce if matched.",
        "properties": {
          "match": {
            "description": "The value to match against (interpretation depends on match_type)"
          },
          "matchType": {
            "allOf": [
              {
                "$ref": "#/definitions/SwitchMatchType"
              }
            ],
            "description": "The type of match to perform"
          },
          "output": {
            "description": "The output to produce if this case matches"
          }
        },
        "required": [
          "match",
          "matchType",
          "output"
        ],
        "title": "SwitchCase",
        "type": "object"
      },
      "SwitchConfig": {
        "description": "Configuration for a Switch step. Defines the value to switch on, the cases to match, and the default output.",
        "properties": {
          "cases": {
            "description": "Array of cases to match against the value",
            "items": {
              "$ref": "#/definitions/SwitchCase"
            },
            "type": "array"
          },
          "default": {
            "description": "Default output if no case matches"
          },
          "value": {
            "allOf": [
              {
                "$ref": "#/definitions/MappingValue"
              }
            ],
            "description": "The value to switch on (evaluated at runtime)"
          }
        },
        "required": [
          "value"
        ],
        "title": "SwitchConfig",
        "type": "object"
      },
      "SwitchMatchType": {
        "description": "Match type for switch cases. Supports all ConditionOperator values plus compound match types.",
        "oneOf": [
          {
            "description": "Greater than",
            "enum": [
              "GT"
            ],
            "type": "string"
          },
          {
            "description": "Greater than or equal",
            "enum": [
              "GTE"
            ],
            "type": "string"
          },
          {
            "description": "Less than",
            "enum": [
              "LT"
            ],
            "type": "string"
          },
          {
            "description": "Less than or equal",
            "enum": [
              "LTE"
            ],
            "type": "string"
          },
          {
            "description": "Equality check",
            "enum": [
              "EQ"
            ],
            "type": "string"
          },
          {
            "description": "Not equal",
            "enum": [
              "NE"
            ],
            "type": "string"
          },
          {
            "description": "String starts with prefix",
            "enum": [
              "STARTS_WITH"
            ],
            "type": "string"
          },
          {
            "description": "String ends with suffix",
            "enum": [
              "ENDS_WITH"
            ],
            "type": "string"
          },
          {
            "description": "Array contains value",
            "enum": [
              "CONTAINS"
            ],
            "type": "string"
          },
          {
            "description": "Value in array",
            "enum": [
              "IN"
            ],
            "type": "string"
          },
          {
            "description": "Value not in array",
            "enum": [
              "NOT_IN"
            ],
            "type": "string"
          },
          {
            "description": "Check if value is defined (not null)",
            "enum": [
              "IS_DEFINED"
            ],
            "type": "string"
          },
          {
            "description": "Check if value is empty",
            "enum": [
              "IS_EMPTY"
            ],
            "type": "string"
          },
          {
            "description": "Check if value is not empty",
            "enum": [
              "IS_NOT_EMPTY"
            ],
            "type": "string"
          },
          {
            "description": "Range check [min, max] - shorthand for GTE min AND LTE max",
            "enum": [
              "BETWEEN"
            ],
            "type": "string"
          },
          {
            "description": "Object with optional {gte, gt, lte, lt} bounds",
            "enum": [
              "RANGE"
            ],
            "type": "string"
          }
        ],
        "title": "SwitchMatchType"
      },
      "ValueType": {
        "description": "Type hints for reference values. Used to interpret data from unknown sources (e.g., HTTP responses).\n\nNote: Type names are aligned with VariableType for consistency: - `integer` for whole numbers - `number` for floating point - `boolean` for true/false - `json` for pass-through JSON (distinct from `object`/`array` in VariableType)",
        "oneOf": [
          {
            "description": "String value",
            "enum": [
              "string"
            ],
            "type": "string"
          },
          {
            "description": "Integer number",
            "enum": [
              "integer"
            ],
            "type": "string"
          },
          {
            "description": "Floating point number",
            "enum": [
              "number"
            ],
            "type": "string"
          },
          {
            "description": "Boolean value",
            "enum": [
              "boolean"
            ],
            "type": "string"
          },
          {
            "description": "JSON object or array (pass through as-is)",
            "enum": [
              "json"
            ],
            "type": "string"
          },
          {
            "description": "Base64-encoded file data (FileData structure with content, filename, mimeType)",
            "enum": [
              "file"
            ],
            "type": "string"
          }
        ],
        "title": "ValueType"
      },
      "Variable": {
        "description": "A typed variable definition with its value.\n\nVariables are static values available during scenario execution via the `variables.*` path in mappings.",
        "properties": {
          "description": {
            "description": "Human-readable description",
            "type": [
              "string",
              "null"
            ]
          },
          "type": {
            "allOf": [
              {
                "$ref": "#/definitions/VariableType"
              }
            ],
            "description": "Variable type"
          },
          "value": {
            "description": "The actual value (must match the declared type)"
          }
        },
        "required": [
          "type",
          "value"
        ],
        "type": "object"
      },
      "VariableType": {
        "description": "Data types for variables. Matches the operator field types for consistency.",
        "oneOf": [
          {
            "description": "String value",
            "enum": [
              "string"
            ],
            "type": "string"
          },
          {
            "description": "Numeric value (floating point)",
            "enum": [
              "number"
            ],
            "type": "string"
          },
          {
            "description": "Integer value",
            "enum": [
              "integer"
            ],
            "type": "string"
          },
          {
            "description": "Boolean value",
            "enum": [
              "boolean"
            ],
            "type": "string"
          },
          {
            "description": "Array of values",
            "enum": [
              "array"
            ],
            "type": "string"
          },
          {
            "description": "JSON object",
            "enum": [
              "object"
            ],
            "type": "string"
          },
          {
            "description": "Base64-encoded file data (FileData structure)",
            "enum": [
              "file"
            ],
            "type": "string"
          }
        ],
        "title": "VariableType"
      },
      "WhileConfig": {
        "description": "Configuration for a While step.",
        "properties": {
          "maxIterations": {
            "description": "Maximum number of iterations (default: 10). Prevents infinite loops.",
            "format": "uint32",
            "minimum": 0.0,
            "type": [
              "integer",
              "null"
            ]
          },
          "timeout": {
            "description": "Step timeout in milliseconds. If exceeded, step fails.",
            "format": "uint64",
            "minimum": 0.0,
            "type": [
              "integer",
              "null"
            ]
          }
        },
        "title": "WhileConfig",
        "type": "object"
      }
    },
    "description": "Complete scenario definition",
    "properties": {
      "debugMode": {
        "description": "Enable step-level debug instrumentation",
        "type": [
          "boolean",
          "null"
        ]
      },
      "executionGraph": {
        "allOf": [
          {
            "$ref": "#/definitions/ExecutionGraph"
          }
        ],
        "description": "The execution graph containing all steps"
      },
      "memoryTier": {
        "anyOf": [
          {
            "$ref": "#/definitions/MemoryTier"
          },
          {
            "type": "null"
          }
        ],
        "description": "Memory allocation tier for scenario execution"
      }
    },
    "required": [
      "executionGraph"
    ],
    "title": "Scenario",
    "type": "object",
    "x-dsl-version": "3.0.0",
    "x-step-types": [
      {
        "category": "execution",
        "description": "Executes an operator operation",
        "displayName": "Agent",
        "schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "definitions": {
            "CompositeInner": {
              "anyOf": [
                {
                  "additionalProperties": {
                    "$ref": "#/definitions/MappingValue"
                  },
                  "description": "Object composite: each field maps to a MappingValue",
                  "type": "object"
                },
                {
                  "description": "Array composite: each element is a MappingValue",
                  "items": {
                    "$ref": "#/definitions/MappingValue"
                  },
                  "type": "array"
                }
              ],
              "description": "Inner value for CompositeValue - either an object or array of MappingValues."
            },
            "MappingValue": {
              "description": "A mapping value specifies how to obtain data for a field.\n\nUses explicit `valueType` discriminator: - `reference`: Value is a path to data (e.g., \"data.name\", \"steps.step1.outputs.result\") - `immediate`: Value is a literal (string, number, boolean, object, array) - `composite`: Value is a structured object or array with nested MappingValues\n\nExample reference: `{ \"valueType\": \"reference\", \"value\": \"data.user.name\" }` Example immediate: `{ \"valueType\": \"immediate\", \"value\": \"Hello World\" }` Example composite: `{ \"valueType\": \"composite\", \"value\": { \"name\": {...}, \"id\": {...} } }`",
              "oneOf": [
                {
                  "description": "Reference to data at a path (e.g., \"data.user.name\", \"variables.count\")",
                  "properties": {
                    "default": {
                      "description": "Default value to use when the reference path returns null or doesn't exist. This allows graceful handling of optional fields while providing fallback values."
                    },
                    "type": {
                      "anyOf": [
                        {
                          "$ref": "#/definitions/ValueType"
                        },
                        {
                          "type": "null"
                        }
                      ],
                      "description": "Expected type hint for the referenced value. Used when the source type is unknown (e.g., HTTP response body). If omitted, the value is passed through as-is (typically as JSON)."
                    },
                    "value": {
                      "description": "Path to the data using dot notation (e.g., \"data.user.name\")",
                      "type": "string"
                    },
                    "valueType": {
                      "enum": [
                        "reference"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                },
                {
                  "description": "Immediate/literal value (string, number, boolean, object, array)",
                  "properties": {
                    "value": {
                      "description": "The literal value (string, number, boolean, object, or array)"
                    },
                    "valueType": {
                      "enum": [
                        "immediate"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                },
                {
                  "description": "Composite value - structured object or array with nested MappingValues",
                  "properties": {
                    "value": {
                      "allOf": [
                        {
                          "$ref": "#/definitions/CompositeInner"
                        }
                      ],
                      "description": "Either an object (HashMap) or array (Vec) of nested MappingValues."
                    },
                    "valueType": {
                      "enum": [
                        "composite"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                }
              ]
            },
            "ValueType": {
              "description": "Type hints for reference values. Used to interpret data from unknown sources (e.g., HTTP responses).\n\nNote: Type names are aligned with VariableType for consistency: - `integer` for whole numbers - `number` for floating point - `boolean` for true/false - `json` for pass-through JSON (distinct from `object`/`array` in VariableType)",
              "oneOf": [
                {
                  "description": "String value",
                  "enum": [
                    "string"
                  ],
                  "type": "string"
                },
                {
                  "description": "Integer number",
                  "enum": [
                    "integer"
                  ],
                  "type": "string"
                },
                {
                  "description": "Floating point number",
                  "enum": [
                    "number"
                  ],
                  "type": "string"
                },
                {
                  "description": "Boolean value",
                  "enum": [
                    "boolean"
                  ],
                  "type": "string"
                },
                {
                  "description": "JSON object or array (pass through as-is)",
                  "enum": [
                    "json"
                  ],
                  "type": "string"
                },
                {
                  "description": "Base64-encoded file data (FileData structure with content, filename, mimeType)",
                  "enum": [
                    "file"
                  ],
                  "type": "string"
                }
              ],
              "title": "ValueType"
            }
          },
          "description": "Executes an agent capability",
          "properties": {
            "agentId": {
              "description": "Agent name (e.g., \"utils\", \"transform\", \"http\", \"sftp\")",
              "type": "string"
            },
            "capabilityId": {
              "description": "Capability name (e.g., \"random-double\", \"group-by\", \"http-request\")",
              "type": "string"
            },
            "connectionId": {
              "description": "Connection ID for agents requiring authentication",
              "type": [
                "string",
                "null"
              ]
            },
            "id": {
              "description": "Unique step identifier",
              "type": "string"
            },
            "inputMapping": {
              "additionalProperties": {
                "$ref": "#/definitions/MappingValue"
              },
              "description": "Maps data to agent capability inputs",
              "type": [
                "object",
                "null"
              ]
            },
            "maxRetries": {
              "description": "Maximum retry attempts (default: 3)",
              "format": "uint32",
              "minimum": 0.0,
              "type": [
                "integer",
                "null"
              ]
            },
            "name": {
              "description": "Human-readable step name",
              "type": [
                "string",
                "null"
              ]
            },
            "retryDelay": {
              "description": "Base delay between retries in milliseconds (default: 1000)",
              "format": "uint64",
              "minimum": 0.0,
              "type": [
                "integer",
                "null"
              ]
            },
            "timeout": {
              "description": "Step timeout in milliseconds. If exceeded, step fails.",
              "format": "uint64",
              "minimum": 0.0,
              "type": [
                "integer",
                "null"
              ]
            }
          },
          "required": [
            "agentId",
            "capabilityId",
            "id"
          ],
          "title": "AgentStep",
          "type": "object"
        },
        "type": "Agent"
      },
      {
        "category": "control",
        "description": "Evaluates conditions and branches execution",
        "displayName": "Conditional",
        "schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "definitions": {
            "CompositeInner": {
              "anyOf": [
                {
                  "additionalProperties": {
                    "$ref": "#/definitions/MappingValue"
                  },
                  "description": "Object composite: each field maps to a MappingValue",
                  "type": "object"
                },
                {
                  "description": "Array composite: each element is a MappingValue",
                  "items": {
                    "$ref": "#/definitions/MappingValue"
                  },
                  "type": "array"
                }
              ],
              "description": "Inner value for CompositeValue - either an object or array of MappingValues."
            },
            "ConditionArgument": {
              "anyOf": [
                {
                  "allOf": [
                    {
                      "$ref": "#/definitions/ConditionExpression"
                    }
                  ],
                  "description": "Nested expression (for AND, OR, NOT, or any operator that takes expressions)"
                },
                {
                  "allOf": [
                    {
                      "$ref": "#/definitions/MappingValue"
                    }
                  ],
                  "description": "A mapping value - either reference (data path) or immediate (literal)"
                }
              ],
              "description": "An argument to a condition operation. Can be a nested expression or a mapping value (reference or immediate).\n\nUses untagged serialization to avoid duplicate \"type\" fields when nesting expressions (since both ConditionExpression and MappingValue use internally-tagged enums). The deserializer distinguishes variants by structure: - Expression: has \"op\" and \"arguments\" fields (from ConditionExpression::Operation) or has \"valueType\" field (from ConditionExpression::Value -> MappingValue) - Value: has \"valueType\" field (from MappingValue)"
            },
            "ConditionExpression": {
              "description": "A condition expression for conditional branching. Can be either an operation (with operator and arguments) or a simple value check.",
              "oneOf": [
                {
                  "description": "A comparison or logical operation",
                  "properties": {
                    "arguments": {
                      "description": "The arguments to the operator (1+ depending on operator). Each argument can be a nested expression or a value (reference/immediate).",
                      "items": {
                        "$ref": "#/definitions/ConditionArgument"
                      },
                      "type": "array"
                    },
                    "op": {
                      "allOf": [
                        {
                          "$ref": "#/definitions/ConditionOperator"
                        }
                      ],
                      "description": "The operator (AND, OR, GT, EQ, STARTS_WITH, etc.)"
                    },
                    "type": {
                      "enum": [
                        "operation"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "arguments",
                    "op",
                    "type"
                  ],
                  "type": "object"
                },
                {
                  "description": "A direct value (reference or immediate) - evaluated as truthy/falsy",
                  "oneOf": [
                    {
                      "description": "Reference to data at a path (e.g., \"data.user.name\", \"variables.count\")",
                      "properties": {
                        "default": {
                          "description": "Default value to use when the reference path returns null or doesn't exist. This allows graceful handling of optional fields while providing fallback values."
                        },
                        "type": {
                          "anyOf": [
                            {
                              "$ref": "#/definitions/ValueType"
                            },
                            {
                              "type": "null"
                            }
                          ],
                          "description": "Expected type hint for the referenced value. Used when the source type is unknown (e.g., HTTP response body). If omitted, the value is passed through as-is (typically as JSON)."
                        },
                        "value": {
                          "description": "Path to the data using dot notation (e.g., \"data.user.name\")",
                          "type": "string"
                        },
                        "valueType": {
                          "enum": [
                            "reference"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "value",
                        "valueType"
                      ],
                      "type": "object"
                    },
                    {
                      "description": "Immediate/literal value (string, number, boolean, object, array)",
                      "properties": {
                        "value": {
                          "description": "The literal value (string, number, boolean, object, or array)"
                        },
                        "valueType": {
                          "enum": [
                            "immediate"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "value",
                        "valueType"
                      ],
                      "type": "object"
                    },
                    {
                      "description": "Composite value - structured object or array with nested MappingValues",
                      "properties": {
                        "value": {
                          "allOf": [
                            {
                              "$ref": "#/definitions/CompositeInner"
                            }
                          ],
                          "description": "Either an object (HashMap) or array (Vec) of nested MappingValues."
                        },
                        "valueType": {
                          "enum": [
                            "composite"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "value",
                        "valueType"
                      ],
                      "type": "object"
                    }
                  ],
                  "properties": {
                    "type": {
                      "enum": [
                        "value"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "type"
                  ],
                  "type": "object"
                }
              ]
            },
            "ConditionOperator": {
              "description": "Condition expression operators",
              "enum": [
                "AND",
                "OR",
                "NOT",
                "GT",
                "GTE",
                "LT",
                "LTE",
                "EQ",
                "NE",
                "STARTS_WITH",
                "ENDS_WITH",
                "CONTAINS",
                "IN",
                "NOT_IN",
                "LENGTH",
                "IS_DEFINED",
                "IS_EMPTY",
                "IS_NOT_EMPTY"
              ],
              "type": "string"
            },
            "MappingValue": {
              "description": "A mapping value specifies how to obtain data for a field.\n\nUses explicit `valueType` discriminator: - `reference`: Value is a path to data (e.g., \"data.name\", \"steps.step1.outputs.result\") - `immediate`: Value is a literal (string, number, boolean, object, array) - `composite`: Value is a structured object or array with nested MappingValues\n\nExample reference: `{ \"valueType\": \"reference\", \"value\": \"data.user.name\" }` Example immediate: `{ \"valueType\": \"immediate\", \"value\": \"Hello World\" }` Example composite: `{ \"valueType\": \"composite\", \"value\": { \"name\": {...}, \"id\": {...} } }`",
              "oneOf": [
                {
                  "description": "Reference to data at a path (e.g., \"data.user.name\", \"variables.count\")",
                  "properties": {
                    "default": {
                      "description": "Default value to use when the reference path returns null or doesn't exist. This allows graceful handling of optional fields while providing fallback values."
                    },
                    "type": {
                      "anyOf": [
                        {
                          "$ref": "#/definitions/ValueType"
                        },
                        {
                          "type": "null"
                        }
                      ],
                      "description": "Expected type hint for the referenced value. Used when the source type is unknown (e.g., HTTP response body). If omitted, the value is passed through as-is (typically as JSON)."
                    },
                    "value": {
                      "description": "Path to the data using dot notation (e.g., \"data.user.name\")",
                      "type": "string"
                    },
                    "valueType": {
                      "enum": [
                        "reference"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                },
                {
                  "description": "Immediate/literal value (string, number, boolean, object, array)",
                  "properties": {
                    "value": {
                      "description": "The literal value (string, number, boolean, object, or array)"
                    },
                    "valueType": {
                      "enum": [
                        "immediate"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                },
                {
                  "description": "Composite value - structured object or array with nested MappingValues",
                  "properties": {
                    "value": {
                      "allOf": [
                        {
                          "$ref": "#/definitions/CompositeInner"
                        }
                      ],
                      "description": "Either an object (HashMap) or array (Vec) of nested MappingValues."
                    },
                    "valueType": {
                      "enum": [
                        "composite"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                }
              ]
            },
            "ValueType": {
              "description": "Type hints for reference values. Used to interpret data from unknown sources (e.g., HTTP responses).\n\nNote: Type names are aligned with VariableType for consistency: - `integer` for whole numbers - `number` for floating point - `boolean` for true/false - `json` for pass-through JSON (distinct from `object`/`array` in VariableType)",
              "oneOf": [
                {
                  "description": "String value",
                  "enum": [
                    "string"
                  ],
                  "type": "string"
                },
                {
                  "description": "Integer number",
                  "enum": [
                    "integer"
                  ],
                  "type": "string"
                },
                {
                  "description": "Floating point number",
                  "enum": [
                    "number"
                  ],
                  "type": "string"
                },
                {
                  "description": "Boolean value",
                  "enum": [
                    "boolean"
                  ],
                  "type": "string"
                },
                {
                  "description": "JSON object or array (pass through as-is)",
                  "enum": [
                    "json"
                  ],
                  "type": "string"
                },
                {
                  "description": "Base64-encoded file data (FileData structure with content, filename, mimeType)",
                  "enum": [
                    "file"
                  ],
                  "type": "string"
                }
              ],
              "title": "ValueType"
            }
          },
          "description": "Evaluates conditions and branches execution",
          "properties": {
            "condition": {
              "allOf": [
                {
                  "$ref": "#/definitions/ConditionExpression"
                }
              ],
              "description": "The condition expression to evaluate"
            },
            "id": {
              "description": "Unique step identifier",
              "type": "string"
            },
            "name": {
              "description": "Human-readable step name",
              "type": [
                "string",
                "null"
              ]
            }
          },
          "required": [
            "condition",
            "id"
          ],
          "title": "ConditionalStep",
          "type": "object"
        },
        "type": "Conditional"
      },
      {
        "category": "control",
        "description": "Exit point - defines scenario outputs",
        "displayName": "Finish",
        "schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "definitions": {
            "CompositeInner": {
              "anyOf": [
                {
                  "additionalProperties": {
                    "$ref": "#/definitions/MappingValue"
                  },
                  "description": "Object composite: each field maps to a MappingValue",
                  "type": "object"
                },
                {
                  "description": "Array composite: each element is a MappingValue",
                  "items": {
                    "$ref": "#/definitions/MappingValue"
                  },
                  "type": "array"
                }
              ],
              "description": "Inner value for CompositeValue - either an object or array of MappingValues."
            },
            "MappingValue": {
              "description": "A mapping value specifies how to obtain data for a field.\n\nUses explicit `valueType` discriminator: - `reference`: Value is a path to data (e.g., \"data.name\", \"steps.step1.outputs.result\") - `immediate`: Value is a literal (string, number, boolean, object, array) - `composite`: Value is a structured object or array with nested MappingValues\n\nExample reference: `{ \"valueType\": \"reference\", \"value\": \"data.user.name\" }` Example immediate: `{ \"valueType\": \"immediate\", \"value\": \"Hello World\" }` Example composite: `{ \"valueType\": \"composite\", \"value\": { \"name\": {...}, \"id\": {...} } }`",
              "oneOf": [
                {
                  "description": "Reference to data at a path (e.g., \"data.user.name\", \"variables.count\")",
                  "properties": {
                    "default": {
                      "description": "Default value to use when the reference path returns null or doesn't exist. This allows graceful handling of optional fields while providing fallback values."
                    },
                    "type": {
                      "anyOf": [
                        {
                          "$ref": "#/definitions/ValueType"
                        },
                        {
                          "type": "null"
                        }
                      ],
                      "description": "Expected type hint for the referenced value. Used when the source type is unknown (e.g., HTTP response body). If omitted, the value is passed through as-is (typically as JSON)."
                    },
                    "value": {
                      "description": "Path to the data using dot notation (e.g., \"data.user.name\")",
                      "type": "string"
                    },
                    "valueType": {
                      "enum": [
                        "reference"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                },
                {
                  "description": "Immediate/literal value (string, number, boolean, object, array)",
                  "properties": {
                    "value": {
                      "description": "The literal value (string, number, boolean, object, or array)"
                    },
                    "valueType": {
                      "enum": [
                        "immediate"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                },
                {
                  "description": "Composite value - structured object or array with nested MappingValues",
                  "properties": {
                    "value": {
                      "allOf": [
                        {
                          "$ref": "#/definitions/CompositeInner"
                        }
                      ],
                      "description": "Either an object (HashMap) or array (Vec) of nested MappingValues."
                    },
                    "valueType": {
                      "enum": [
                        "composite"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                }
              ]
            },
            "ValueType": {
              "description": "Type hints for reference values. Used to interpret data from unknown sources (e.g., HTTP responses).\n\nNote: Type names are aligned with VariableType for consistency: - `integer` for whole numbers - `number` for floating point - `boolean` for true/false - `json` for pass-through JSON (distinct from `object`/`array` in VariableType)",
              "oneOf": [
                {
                  "description": "String value",
                  "enum": [
                    "string"
                  ],
                  "type": "string"
                },
                {
                  "description": "Integer number",
                  "enum": [
                    "integer"
                  ],
                  "type": "string"
                },
                {
                  "description": "Floating point number",
                  "enum": [
                    "number"
                  ],
                  "type": "string"
                },
                {
                  "description": "Boolean value",
                  "enum": [
                    "boolean"
                  ],
                  "type": "string"
                },
                {
                  "description": "JSON object or array (pass through as-is)",
                  "enum": [
                    "json"
                  ],
                  "type": "string"
                },
                {
                  "description": "Base64-encoded file data (FileData structure with content, filename, mimeType)",
                  "enum": [
                    "file"
                  ],
                  "type": "string"
                }
              ],
              "title": "ValueType"
            }
          },
          "description": "Exit point step - defines scenario outputs",
          "properties": {
            "id": {
              "description": "Unique step identifier",
              "type": "string"
            },
            "inputMapping": {
              "additionalProperties": {
                "$ref": "#/definitions/MappingValue"
              },
              "description": "Maps scenario data to output values",
              "type": [
                "object",
                "null"
              ]
            },
            "name": {
              "description": "Human-readable step name",
              "type": [
                "string",
                "null"
              ]
            }
          },
          "required": [
            "id"
          ],
          "title": "FinishStep",
          "type": "object"
        },
        "type": "Finish"
      },
      {
        "category": "control",
        "description": "Iterates over an array, executing subgraph for each item",
        "displayName": "Split",
        "schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "definitions": {
            "ChildVersion": {
              "anyOf": [
                {
                  "description": "Use latest version",
                  "type": "string"
                },
                {
                  "description": "Use specific version number",
                  "format": "int32",
                  "type": "integer"
                }
              ],
              "description": "Child scenario version specification"
            },
            "CompositeInner": {
              "anyOf": [
                {
                  "additionalProperties": {
                    "$ref": "#/definitions/MappingValue"
                  },
                  "description": "Object composite: each field maps to a MappingValue",
                  "type": "object"
                },
                {
                  "description": "Array composite: each element is a MappingValue",
                  "items": {
                    "$ref": "#/definitions/MappingValue"
                  },
                  "type": "array"
                }
              ],
              "description": "Inner value for CompositeValue - either an object or array of MappingValues."
            },
            "ConditionArgument": {
              "anyOf": [
                {
                  "allOf": [
                    {
                      "$ref": "#/definitions/ConditionExpression"
                    }
                  ],
                  "description": "Nested expression (for AND, OR, NOT, or any operator that takes expressions)"
                },
                {
                  "allOf": [
                    {
                      "$ref": "#/definitions/MappingValue"
                    }
                  ],
                  "description": "A mapping value - either reference (data path) or immediate (literal)"
                }
              ],
              "description": "An argument to a condition operation. Can be a nested expression or a mapping value (reference or immediate).\n\nUses untagged serialization to avoid duplicate \"type\" fields when nesting expressions (since both ConditionExpression and MappingValue use internally-tagged enums). The deserializer distinguishes variants by structure: - Expression: has \"op\" and \"arguments\" fields (from ConditionExpression::Operation) or has \"valueType\" field (from ConditionExpression::Value -> MappingValue) - Value: has \"valueType\" field (from MappingValue)"
            },
            "ConditionExpression": {
              "description": "A condition expression for conditional branching. Can be either an operation (with operator and arguments) or a simple value check.",
              "oneOf": [
                {
                  "description": "A comparison or logical operation",
                  "properties": {
                    "arguments": {
                      "description": "The arguments to the operator (1+ depending on operator). Each argument can be a nested expression or a value (reference/immediate).",
                      "items": {
                        "$ref": "#/definitions/ConditionArgument"
                      },
                      "type": "array"
                    },
                    "op": {
                      "allOf": [
                        {
                          "$ref": "#/definitions/ConditionOperator"
                        }
                      ],
                      "description": "The operator (AND, OR, GT, EQ, STARTS_WITH, etc.)"
                    },
                    "type": {
                      "enum": [
                        "operation"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "arguments",
                    "op",
                    "type"
                  ],
                  "type": "object"
                },
                {
                  "description": "A direct value (reference or immediate) - evaluated as truthy/falsy",
                  "oneOf": [
                    {
                      "description": "Reference to data at a path (e.g., \"data.user.name\", \"variables.count\")",
                      "properties": {
                        "default": {
                          "description": "Default value to use when the reference path returns null or doesn't exist. This allows graceful handling of optional fields while providing fallback values."
                        },
                        "type": {
                          "anyOf": [
                            {
                              "$ref": "#/definitions/ValueType"
                            },
                            {
                              "type": "null"
                            }
                          ],
                          "description": "Expected type hint for the referenced value. Used when the source type is unknown (e.g., HTTP response body). If omitted, the value is passed through as-is (typically as JSON)."
                        },
                        "value": {
                          "description": "Path to the data using dot notation (e.g., \"data.user.name\")",
                          "type": "string"
                        },
                        "valueType": {
                          "enum": [
                            "reference"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "value",
                        "valueType"
                      ],
                      "type": "object"
                    },
                    {
                      "description": "Immediate/literal value (string, number, boolean, object, array)",
                      "properties": {
                        "value": {
                          "description": "The literal value (string, number, boolean, object, or array)"
                        },
                        "valueType": {
                          "enum": [
                            "immediate"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "value",
                        "valueType"
                      ],
                      "type": "object"
                    },
                    {
                      "description": "Composite value - structured object or array with nested MappingValues",
                      "properties": {
                        "value": {
                          "allOf": [
                            {
                              "$ref": "#/definitions/CompositeInner"
                            }
                          ],
                          "description": "Either an object (HashMap) or array (Vec) of nested MappingValues."
                        },
                        "valueType": {
                          "enum": [
                            "composite"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "value",
                        "valueType"
                      ],
                      "type": "object"
                    }
                  ],
                  "properties": {
                    "type": {
                      "enum": [
                        "value"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "type"
                  ],
                  "type": "object"
                }
              ]
            },
            "ConditionOperator": {
              "description": "Condition expression operators",
              "enum": [
                "AND",
                "OR",
                "NOT",
                "GT",
                "GTE",
                "LT",
                "LTE",
                "EQ",
                "NE",
                "STARTS_WITH",
                "ENDS_WITH",
                "CONTAINS",
                "IN",
                "NOT_IN",
                "LENGTH",
                "IS_DEFINED",
                "IS_EMPTY",
                "IS_NOT_EMPTY"
              ],
              "type": "string"
            },
            "ExecutionGraph": {
              "description": "The execution graph containing all steps and control flow",
              "properties": {
                "description": {
                  "description": "Detailed description of what the scenario does",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "edges": {
                  "description": "UI edge positions for the visual scenario editor. This is opaque data managed by the UI - the runtime does not interpret this field. Typically contains an array of edge objects connecting nodes. Not used in compilation or execution."
                },
                "entryPoint": {
                  "description": "ID of the entry point step (step with no incoming edges)",
                  "type": "string"
                },
                "executionPlan": {
                  "description": "Ordered list of step transitions defining control flow",
                  "items": {
                    "$ref": "#/definitions/ExecutionPlanEdge"
                  },
                  "type": "array"
                },
                "inputSchema": {
                  "additionalProperties": {
                    "$ref": "#/definitions/SchemaField"
                  },
                  "description": "Schema defining expected input data structure for this scenario. Keys are field names, values define the field type and constraints.",
                  "type": "object"
                },
                "name": {
                  "description": "Human-readable name for the scenario",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "nodes": {
                  "description": "UI node positions for the visual scenario editor. This is opaque data managed by the UI - the runtime does not interpret this field. Typically contains an array of node objects with position coordinates. Not used in compilation or execution."
                },
                "notes": {
                  "description": "Visual annotations for UI (not used in compilation)",
                  "items": {
                    "$ref": "#/definitions/Note"
                  },
                  "type": [
                    "array",
                    "null"
                  ]
                },
                "outputSchema": {
                  "additionalProperties": {
                    "$ref": "#/definitions/SchemaField"
                  },
                  "description": "Schema defining output data structure for this scenario. Keys are field names, values define the field type and constraints.",
                  "type": "object"
                },
                "steps": {
                  "additionalProperties": {
                    "$ref": "#/definitions/Step"
                  },
                  "description": "Map of step IDs to step definitions",
                  "type": "object"
                },
                "variables": {
                  "additionalProperties": {
                    "$ref": "#/definitions/Variable"
                  },
                  "description": "Constant variables available as `variables.<name>` during execution. These are static values defined at design time, not overridable at runtime. Keys are variable names, values contain type and value.",
                  "type": "object"
                }
              },
              "required": [
                "entryPoint",
                "steps"
              ],
              "type": "object"
            },
            "ExecutionPlanEdge": {
              "description": "An edge in the execution plan defining control flow",
              "properties": {
                "fromStep": {
                  "description": "Source step ID",
                  "type": "string"
                },
                "label": {
                  "description": "Edge label for control flow: - `\"true\"`/`\"false\"` for Conditional step branches - `\"onError\"` for error handling transition (step failed after retries) - `None` or empty for normal sequential flow",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "toStep": {
                  "description": "Target step ID",
                  "type": "string"
                }
              },
              "required": [
                "fromStep",
                "toStep"
              ],
              "type": "object"
            },
            "LogLevel": {
              "description": "Log level for Log steps",
              "oneOf": [
                {
                  "description": "Debug level - verbose diagnostic information",
                  "enum": [
                    "debug"
                  ],
                  "type": "string"
                },
                {
                  "description": "Info level - general informational messages",
                  "enum": [
                    "info"
                  ],
                  "type": "string"
                },
                {
                  "description": "Warn level - warning conditions",
                  "enum": [
                    "warn"
                  ],
                  "type": "string"
                },
                {
                  "description": "Error level - error conditions",
                  "enum": [
                    "error"
                  ],
                  "type": "string"
                }
              ]
            },
            "MappingValue": {
              "description": "A mapping value specifies how to obtain data for a field.\n\nUses explicit `valueType` discriminator: - `reference`: Value is a path to data (e.g., \"data.name\", \"steps.step1.outputs.result\") - `immediate`: Value is a literal (string, number, boolean, object, array) - `composite`: Value is a structured object or array with nested MappingValues\n\nExample reference: `{ \"valueType\": \"reference\", \"value\": \"data.user.name\" }` Example immediate: `{ \"valueType\": \"immediate\", \"value\": \"Hello World\" }` Example composite: `{ \"valueType\": \"composite\", \"value\": { \"name\": {...}, \"id\": {...} } }`",
              "oneOf": [
                {
                  "description": "Reference to data at a path (e.g., \"data.user.name\", \"variables.count\")",
                  "properties": {
                    "default": {
                      "description": "Default value to use when the reference path returns null or doesn't exist. This allows graceful handling of optional fields while providing fallback values."
                    },
                    "type": {
                      "anyOf": [
                        {
                          "$ref": "#/definitions/ValueType"
                        },
                        {
                          "type": "null"
                        }
                      ],
                      "description": "Expected type hint for the referenced value. Used when the source type is unknown (e.g., HTTP response body). If omitted, the value is passed through as-is (typically as JSON)."
                    },
                    "value": {
                      "description": "Path to the data using dot notation (e.g., \"data.user.name\")",
                      "type": "string"
                    },
                    "valueType": {
                      "enum": [
                        "reference"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                },
                {
                  "description": "Immediate/literal value (string, number, boolean, object, array)",
                  "properties": {
                    "value": {
                      "description": "The literal value (string, number, boolean, object, or array)"
                    },
                    "valueType": {
                      "enum": [
                        "immediate"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                },
                {
                  "description": "Composite value - structured object or array with nested MappingValues",
                  "properties": {
                    "value": {
                      "allOf": [
                        {
                          "$ref": "#/definitions/CompositeInner"
                        }
                      ],
                      "description": "Either an object (HashMap) or array (Vec) of nested MappingValues."
                    },
                    "valueType": {
                      "enum": [
                        "composite"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                }
              ]
            },
            "Note": {
              "description": "Visual annotation for scenario editor UI",
              "properties": {
                "id": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "position": {
                  "anyOf": [
                    {
                      "$ref": "#/definitions/Position"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "text": {
                  "type": [
                    "string",
                    "null"
                  ]
                }
              },
              "type": "object"
            },
            "Position": {
              "description": "Position coordinates for UI elements",
              "properties": {
                "x": {
                  "format": "double",
                  "type": "number"
                },
                "y": {
                  "format": "double",
                  "type": "number"
                }
              },
              "required": [
                "x",
                "y"
              ],
              "type": "object"
            },
            "SchemaField": {
              "description": "A field definition for input/output schemas.\n\nUsed to define the structure of scenario inputs and outputs. The field name is the key in the HashMap.",
              "properties": {
                "default": {
                  "description": "Default value if not provided"
                },
                "description": {
                  "description": "Human-readable description",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "enum": {
                  "description": "Allowed values (enum)",
                  "items": true,
                  "type": [
                    "array",
                    "null"
                  ]
                },
                "example": {
                  "description": "Example value for documentation"
                },
                "items": {
                  "anyOf": [
                    {
                      "$ref": "#/definitions/SchemaField"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "description": "For array types, the type of items in the array"
                },
                "required": {
                  "default": false,
                  "description": "Whether this field is required",
                  "type": "boolean"
                },
                "type": {
                  "allOf": [
                    {
                      "$ref": "#/definitions/SchemaFieldType"
                    }
                  ],
                  "description": "Field type (string, integer, number, boolean, array, object)"
                }
              },
              "required": [
                "type"
              ],
              "title": "SchemaField",
              "type": "object"
            },
            "SchemaFieldType": {
              "description": "Data types for schema fields. Used in input/output schema definitions.",
              "oneOf": [
                {
                  "description": "String value",
                  "enum": [
                    "string"
                  ],
                  "type": "string"
                },
                {
                  "description": "Integer number",
                  "enum": [
                    "integer"
                  ],
                  "type": "string"
                },
                {
                  "description": "Floating point number",
                  "enum": [
                    "number"
                  ],
                  "type": "string"
                },
                {
                  "description": "Boolean value",
                  "enum": [
                    "boolean"
                  ],
                  "type": "string"
                },
                {
                  "description": "Array of values (use `items` to specify element type)",
                  "enum": [
                    "array"
                  ],
                  "type": "string"
                },
                {
                  "description": "JSON object",
                  "enum": [
                    "object"
                  ],
                  "type": "string"
                },
                {
                  "description": "Base64-encoded file data (FileData structure with content, filename, mimeType)",
                  "enum": [
                    "file"
                  ],
                  "type": "string"
                }
              ],
              "title": "SchemaFieldType"
            },
            "SplitConfig": {
              "description": "Configuration for a Split step. Defines the array to iterate over and execution options.",
              "properties": {
                "dontStopOnFailed": {
                  "description": "Continue execution even if some iterations fail",
                  "type": [
                    "boolean",
                    "null"
                  ]
                },
                "maxRetries": {
                  "description": "Maximum retry attempts for the split operation (default: 0 - no retries)",
                  "format": "uint32",
                  "minimum": 0.0,
                  "type": [
                    "integer",
                    "null"
                  ]
                },
                "parallelism": {
                  "description": "Maximum concurrent iterations (0 = unlimited)",
                  "format": "uint32",
                  "minimum": 0.0,
                  "type": [
                    "integer",
                    "null"
                  ]
                },
                "retryDelay": {
                  "description": "Base delay between retries in milliseconds (default: 1000)",
                  "format": "uint64",
                  "minimum": 0.0,
                  "type": [
                    "integer",
                    "null"
                  ]
                },
                "sequential": {
                  "description": "Execute iterations sequentially instead of in parallel",
                  "type": [
                    "boolean",
                    "null"
                  ]
                },
                "timeout": {
                  "description": "Step timeout in milliseconds. If exceeded, step fails.",
                  "format": "uint64",
                  "minimum": 0.0,
                  "type": [
                    "integer",
                    "null"
                  ]
                },
                "value": {
                  "allOf": [
                    {
                      "$ref": "#/definitions/MappingValue"
                    }
                  ],
                  "description": "The array to iterate over"
                },
                "variables": {
                  "additionalProperties": {
                    "$ref": "#/definitions/MappingValue"
                  },
                  "description": "Additional variables to pass to each iteration's subgraph",
                  "type": [
                    "object",
                    "null"
                  ]
                }
              },
              "required": [
                "value"
              ],
              "title": "SplitConfig",
              "type": "object"
            },
            "Step": {
              "description": "Union of all step types, discriminated by stepType field",
              "oneOf": [
                {
                  "description": "Exit point - defines scenario outputs",
                  "properties": {
                    "id": {
                      "description": "Unique step identifier",
                      "type": "string"
                    },
                    "inputMapping": {
                      "additionalProperties": {
                        "$ref": "#/definitions/MappingValue"
                      },
                      "description": "Maps scenario data to output values",
                      "type": [
                        "object",
                        "null"
                      ]
                    },
                    "name": {
                      "description": "Human-readable step name",
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "stepType": {
                      "enum": [
                        "Finish"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "stepType"
                  ],
                  "type": "object"
                },
                {
                  "description": "Executes an agent capability",
                  "properties": {
                    "agentId": {
                      "description": "Agent name (e.g., \"utils\", \"transform\", \"http\", \"sftp\")",
                      "type": "string"
                    },
                    "capabilityId": {
                      "description": "Capability name (e.g., \"random-double\", \"group-by\", \"http-request\")",
                      "type": "string"
                    },
                    "connectionId": {
                      "description": "Connection ID for agents requiring authentication",
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "id": {
                      "description": "Unique step identifier",
                      "type": "string"
                    },
                    "inputMapping": {
                      "additionalProperties": {
                        "$ref": "#/definitions/MappingValue"
                      },
                      "description": "Maps data to agent capability inputs",
                      "type": [
                        "object",
                        "null"
                      ]
                    },
                    "maxRetries": {
                      "description": "Maximum retry attempts (default: 3)",
                      "format": "uint32",
                      "minimum": 0.0,
                      "type": [
                        "integer",
                        "null"
                      ]
                    },
                    "name": {
                      "description": "Human-readable step name",
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "retryDelay": {
                      "description": "Base delay between retries in milliseconds (default: 1000)",
                      "format": "uint64",
                      "minimum": 0.0,
                      "type": [
                        "integer",
                        "null"
                      ]
                    },
                    "stepType": {
                      "enum": [
                        "Agent"
                      ],
                      "type": "string"
                    },
                    "timeout": {
                      "description": "Step timeout in milliseconds. If exceeded, step fails.",
                      "format": "uint64",
                      "minimum": 0.0,
                      "type": [
                        "integer",
                        "null"
                      ]
                    }
                  },
                  "required": [
                    "agentId",
                    "capabilityId",
                    "id",
                    "stepType"
                  ],
                  "type": "object"
                },
                {
                  "description": "Evaluates conditions and branches",
                  "properties": {
                    "condition": {
                      "allOf": [
                        {
                          "$ref": "#/definitions/ConditionExpression"
                        }
                      ],
                      "description": "The condition expression to evaluate"
                    },
                    "id": {
                      "description": "Unique step identifier",
                      "type": "string"
                    },
                    "name": {
                      "description": "Human-readable step name",
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "stepType": {
                      "enum": [
                        "Conditional"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "condition",
                    "id",
                    "stepType"
                  ],
                  "type": "object"
                },
                {
                  "description": "Iterates over an array, executing subgraph for each item",
                  "properties": {
                    "config": {
                      "anyOf": [
                        {
                          "$ref": "#/definitions/SplitConfig"
                        },
                        {
                          "type": "null"
                        }
                      ],
                      "description": "Split configuration: array to iterate, parallelism settings, error handling"
                    },
                    "id": {
                      "description": "Unique step identifier",
                      "type": "string"
                    },
                    "inputSchema": {
                      "additionalProperties": {
                        "$ref": "#/definitions/SchemaField"
                      },
                      "description": "Schema defining the expected shape of each item in the array. Keys are field names, values define the field type and constraints.",
                      "type": "object"
                    },
                    "name": {
                      "description": "Human-readable step name",
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "outputSchema": {
                      "additionalProperties": {
                        "$ref": "#/definitions/SchemaField"
                      },
                      "description": "Schema defining the expected output from each iteration. Keys are field names, values define the field type and constraints.",
                      "type": "object"
                    },
                    "stepType": {
                      "enum": [
                        "Split"
                      ],
                      "type": "string"
                    },
                    "subgraph": {
                      "allOf": [
                        {
                          "$ref": "#/definitions/ExecutionGraph"
                        }
                      ],
                      "description": "Nested execution graph for each iteration"
                    }
                  },
                  "required": [
                    "id",
                    "stepType",
                    "subgraph"
                  ],
                  "title": "SplitStep",
                  "type": "object"
                },
                {
                  "description": "Multi-way branch based on value matching",
                  "properties": {
                    "config": {
                      "anyOf": [
                        {
                          "$ref": "#/definitions/SwitchConfig"
                        },
                        {
                          "type": "null"
                        }
                      ],
                      "description": "Switch configuration: value to switch on, cases, and default"
                    },
                    "id": {
                      "description": "Unique step identifier",
                      "type": "string"
                    },
                    "name": {
                      "description": "Human-readable step name",
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "stepType": {
                      "enum": [
                        "Switch"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "stepType"
                  ],
                  "title": "SwitchStep",
                  "type": "object"
                },
                {
                  "description": "Executes a nested child scenario",
                  "properties": {
                    "childScenarioId": {
                      "description": "ID of the child scenario to execute",
                      "type": "string"
                    },
                    "childVersion": {
                      "allOf": [
                        {
                          "$ref": "#/definitions/ChildVersion"
                        }
                      ],
                      "description": "Version of child scenario (\"latest\" or specific version number)"
                    },
                    "id": {
                      "description": "Unique step identifier",
                      "type": "string"
                    },
                    "inputMapping": {
                      "additionalProperties": {
                        "$ref": "#/definitions/MappingValue"
                      },
                      "description": "Maps parent data to child scenario inputs",
                      "type": [
                        "object",
                        "null"
                      ]
                    },
                    "maxRetries": {
                      "description": "Maximum retry attempts (default: 3)",
                      "format": "uint32",
                      "minimum": 0.0,
                      "type": [
                        "integer",
                        "null"
                      ]
                    },
                    "name": {
                      "description": "Human-readable step name",
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "retryDelay": {
                      "description": "Base delay between retries in milliseconds (default: 1000)",
                      "format": "uint64",
                      "minimum": 0.0,
                      "type": [
                        "integer",
                        "null"
                      ]
                    },
                    "stepType": {
                      "enum": [
                        "StartScenario"
                      ],
                      "type": "string"
                    },
                    "timeout": {
                      "description": "Step timeout in milliseconds. If exceeded, step fails.",
                      "format": "uint64",
                      "minimum": 0.0,
                      "type": [
                        "integer",
                        "null"
                      ]
                    }
                  },
                  "required": [
                    "childScenarioId",
                    "childVersion",
                    "id",
                    "stepType"
                  ],
                  "type": "object"
                },
                {
                  "description": "Conditional loop - repeat until condition is false",
                  "properties": {
                    "condition": {
                      "allOf": [
                        {
                          "$ref": "#/definitions/ConditionExpression"
                        }
                      ],
                      "description": "The condition expression to evaluate before each iteration. Loop continues while condition is true."
                    },
                    "config": {
                      "anyOf": [
                        {
                          "$ref": "#/definitions/WhileConfig"
                        },
                        {
                          "type": "null"
                        }
                      ],
                      "description": "While loop configuration"
                    },
                    "id": {
                      "description": "Unique step identifier",
                      "type": "string"
                    },
                    "name": {
                      "description": "Human-readable step name",
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "stepType": {
                      "enum": [
                        "While"
                      ],
                      "type": "string"
                    },
                    "subgraph": {
                      "allOf": [
                        {
                          "$ref": "#/definitions/ExecutionGraph"
                        }
                      ],
                      "description": "Nested execution graph to execute on each iteration"
                    }
                  },
                  "required": [
                    "condition",
                    "id",
                    "stepType",
                    "subgraph"
                  ],
                  "title": "WhileStep",
                  "type": "object"
                },
                {
                  "description": "Emit custom log/debug events",
                  "properties": {
                    "context": {
                      "additionalProperties": {
                        "$ref": "#/definitions/MappingValue"
                      },
                      "description": "Additional context data to include in the log event. Keys are field names, values specify how to obtain the data.",
                      "type": [
                        "object",
                        "null"
                      ]
                    },
                    "id": {
                      "description": "Unique step identifier",
                      "type": "string"
                    },
                    "level": {
                      "allOf": [
                        {
                          "$ref": "#/definitions/LogLevel"
                        }
                      ],
                      "default": "info",
                      "description": "Log level"
                    },
                    "message": {
                      "description": "Log message",
                      "type": "string"
                    },
                    "name": {
                      "description": "Human-readable step name",
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "stepType": {
                      "enum": [
                        "Log"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "id",
                    "message",
                    "stepType"
                  ],
                  "title": "LogStep",
                  "type": "object"
                },
                {
                  "description": "Acquire a connection for use with secure agents",
                  "properties": {
                    "connectionId": {
                      "description": "Reference to connection in the connection registry",
                      "type": "string"
                    },
                    "id": {
                      "description": "Unique step identifier",
                      "type": "string"
                    },
                    "integrationId": {
                      "description": "Type of connection (bearer, api_key, basic_auth, sftp, etc.)",
                      "type": "string"
                    },
                    "name": {
                      "description": "Human-readable step name",
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "stepType": {
                      "enum": [
                        "Connection"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "connectionId",
                    "id",
                    "integrationId",
                    "stepType"
                  ],
                  "title": "ConnectionStep",
                  "type": "object"
                }
              ]
            },
            "SwitchCase": {
              "description": "A single case in a Switch step. Defines a match condition and the output to produce if matched.",
              "properties": {
                "match": {
                  "description": "The value to match against (interpretation depends on match_type)"
                },
                "matchType": {
                  "allOf": [
                    {
                      "$ref": "#/definitions/SwitchMatchType"
                    }
                  ],
                  "description": "The type of match to perform"
                },
                "output": {
                  "description": "The output to produce if this case matches"
                }
              },
              "required": [
                "match",
                "matchType",
                "output"
              ],
              "title": "SwitchCase",
              "type": "object"
            },
            "SwitchConfig": {
              "description": "Configuration for a Switch step. Defines the value to switch on, the cases to match, and the default output.",
              "properties": {
                "cases": {
                  "description": "Array of cases to match against the value",
                  "items": {
                    "$ref": "#/definitions/SwitchCase"
                  },
                  "type": "array"
                },
                "default": {
                  "description": "Default output if no case matches"
                },
                "value": {
                  "allOf": [
                    {
                      "$ref": "#/definitions/MappingValue"
                    }
                  ],
                  "description": "The value to switch on (evaluated at runtime)"
                }
              },
              "required": [
                "value"
              ],
              "title": "SwitchConfig",
              "type": "object"
            },
            "SwitchMatchType": {
              "description": "Match type for switch cases. Supports all ConditionOperator values plus compound match types.",
              "oneOf": [
                {
                  "description": "Greater than",
                  "enum": [
                    "GT"
                  ],
                  "type": "string"
                },
                {
                  "description": "Greater than or equal",
                  "enum": [
                    "GTE"
                  ],
                  "type": "string"
                },
                {
                  "description": "Less than",
                  "enum": [
                    "LT"
                  ],
                  "type": "string"
                },
                {
                  "description": "Less than or equal",
                  "enum": [
                    "LTE"
                  ],
                  "type": "string"
                },
                {
                  "description": "Equality check",
                  "enum": [
                    "EQ"
                  ],
                  "type": "string"
                },
                {
                  "description": "Not equal",
                  "enum": [
                    "NE"
                  ],
                  "type": "string"
                },
                {
                  "description": "String starts with prefix",
                  "enum": [
                    "STARTS_WITH"
                  ],
                  "type": "string"
                },
                {
                  "description": "String ends with suffix",
                  "enum": [
                    "ENDS_WITH"
                  ],
                  "type": "string"
                },
                {
                  "description": "Array contains value",
                  "enum": [
                    "CONTAINS"
                  ],
                  "type": "string"
                },
                {
                  "description": "Value in array",
                  "enum": [
                    "IN"
                  ],
                  "type": "string"
                },
                {
                  "description": "Value not in array",
                  "enum": [
                    "NOT_IN"
                  ],
                  "type": "string"
                },
                {
                  "description": "Check if value is defined (not null)",
                  "enum": [
                    "IS_DEFINED"
                  ],
                  "type": "string"
                },
                {
                  "description": "Check if value is empty",
                  "enum": [
                    "IS_EMPTY"
                  ],
                  "type": "string"
                },
                {
                  "description": "Check if value is not empty",
                  "enum": [
                    "IS_NOT_EMPTY"
                  ],
                  "type": "string"
                },
                {
                  "description": "Range check [min, max] - shorthand for GTE min AND LTE max",
                  "enum": [
                    "BETWEEN"
                  ],
                  "type": "string"
                },
                {
                  "description": "Object with optional {gte, gt, lte, lt} bounds",
                  "enum": [
                    "RANGE"
                  ],
                  "type": "string"
                }
              ],
              "title": "SwitchMatchType"
            },
            "ValueType": {
              "description": "Type hints for reference values. Used to interpret data from unknown sources (e.g., HTTP responses).\n\nNote: Type names are aligned with VariableType for consistency: - `integer` for whole numbers - `number` for floating point - `boolean` for true/false - `json` for pass-through JSON (distinct from `object`/`array` in VariableType)",
              "oneOf": [
                {
                  "description": "String value",
                  "enum": [
                    "string"
                  ],
                  "type": "string"
                },
                {
                  "description": "Integer number",
                  "enum": [
                    "integer"
                  ],
                  "type": "string"
                },
                {
                  "description": "Floating point number",
                  "enum": [
                    "number"
                  ],
                  "type": "string"
                },
                {
                  "description": "Boolean value",
                  "enum": [
                    "boolean"
                  ],
                  "type": "string"
                },
                {
                  "description": "JSON object or array (pass through as-is)",
                  "enum": [
                    "json"
                  ],
                  "type": "string"
                },
                {
                  "description": "Base64-encoded file data (FileData structure with content, filename, mimeType)",
                  "enum": [
                    "file"
                  ],
                  "type": "string"
                }
              ],
              "title": "ValueType"
            },
            "Variable": {
              "description": "A typed variable definition with its value.\n\nVariables are static values available during scenario execution via the `variables.*` path in mappings.",
              "properties": {
                "description": {
                  "description": "Human-readable description",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "type": {
                  "allOf": [
                    {
                      "$ref": "#/definitions/VariableType"
                    }
                  ],
                  "description": "Variable type"
                },
                "value": {
                  "description": "The actual value (must match the declared type)"
                }
              },
              "required": [
                "type",
                "value"
              ],
              "type": "object"
            },
            "VariableType": {
              "description": "Data types for variables. Matches the operator field types for consistency.",
              "oneOf": [
                {
                  "description": "String value",
                  "enum": [
                    "string"
                  ],
                  "type": "string"
                },
                {
                  "description": "Numeric value (floating point)",
                  "enum": [
                    "number"
                  ],
                  "type": "string"
                },
                {
                  "description": "Integer value",
                  "enum": [
                    "integer"
                  ],
                  "type": "string"
                },
                {
                  "description": "Boolean value",
                  "enum": [
                    "boolean"
                  ],
                  "type": "string"
                },
                {
                  "description": "Array of values",
                  "enum": [
                    "array"
                  ],
                  "type": "string"
                },
                {
                  "description": "JSON object",
                  "enum": [
                    "object"
                  ],
                  "type": "string"
                },
                {
                  "description": "Base64-encoded file data (FileData structure)",
                  "enum": [
                    "file"
                  ],
                  "type": "string"
                }
              ],
              "title": "VariableType"
            },
            "WhileConfig": {
              "description": "Configuration for a While step.",
              "properties": {
                "maxIterations": {
                  "description": "Maximum number of iterations (default: 10). Prevents infinite loops.",
                  "format": "uint32",
                  "minimum": 0.0,
                  "type": [
                    "integer",
                    "null"
                  ]
                },
                "timeout": {
                  "description": "Step timeout in milliseconds. If exceeded, step fails.",
                  "format": "uint64",
                  "minimum": 0.0,
                  "type": [
                    "integer",
                    "null"
                  ]
                }
              },
              "title": "WhileConfig",
              "type": "object"
            }
          },
          "description": "Iterates over an array, executing subgraph for each item",
          "properties": {
            "config": {
              "anyOf": [
                {
                  "$ref": "#/definitions/SplitConfig"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Split configuration: array to iterate, parallelism settings, error handling"
            },
            "id": {
              "description": "Unique step identifier",
              "type": "string"
            },
            "inputSchema": {
              "additionalProperties": {
                "$ref": "#/definitions/SchemaField"
              },
              "description": "Schema defining the expected shape of each item in the array. Keys are field names, values define the field type and constraints.",
              "type": "object"
            },
            "name": {
              "description": "Human-readable step name",
              "type": [
                "string",
                "null"
              ]
            },
            "outputSchema": {
              "additionalProperties": {
                "$ref": "#/definitions/SchemaField"
              },
              "description": "Schema defining the expected output from each iteration. Keys are field names, values define the field type and constraints.",
              "type": "object"
            },
            "subgraph": {
              "allOf": [
                {
                  "$ref": "#/definitions/ExecutionGraph"
                }
              ],
              "description": "Nested execution graph for each iteration"
            }
          },
          "required": [
            "id",
            "subgraph"
          ],
          "title": "SplitStep",
          "type": "object"
        },
        "type": "Split"
      },
      {
        "category": "control",
        "description": "Entry point - receives scenario inputs",
        "displayName": "Start",
        "schema": null,
        "type": "Start"
      },
      {
        "category": "execution",
        "description": "Executes a nested child scenario",
        "displayName": "Start Scenario",
        "schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "definitions": {
            "ChildVersion": {
              "anyOf": [
                {
                  "description": "Use latest version",
                  "type": "string"
                },
                {
                  "description": "Use specific version number",
                  "format": "int32",
                  "type": "integer"
                }
              ],
              "description": "Child scenario version specification"
            },
            "CompositeInner": {
              "anyOf": [
                {
                  "additionalProperties": {
                    "$ref": "#/definitions/MappingValue"
                  },
                  "description": "Object composite: each field maps to a MappingValue",
                  "type": "object"
                },
                {
                  "description": "Array composite: each element is a MappingValue",
                  "items": {
                    "$ref": "#/definitions/MappingValue"
                  },
                  "type": "array"
                }
              ],
              "description": "Inner value for CompositeValue - either an object or array of MappingValues."
            },
            "MappingValue": {
              "description": "A mapping value specifies how to obtain data for a field.\n\nUses explicit `valueType` discriminator: - `reference`: Value is a path to data (e.g., \"data.name\", \"steps.step1.outputs.result\") - `immediate`: Value is a literal (string, number, boolean, object, array) - `composite`: Value is a structured object or array with nested MappingValues\n\nExample reference: `{ \"valueType\": \"reference\", \"value\": \"data.user.name\" }` Example immediate: `{ \"valueType\": \"immediate\", \"value\": \"Hello World\" }` Example composite: `{ \"valueType\": \"composite\", \"value\": { \"name\": {...}, \"id\": {...} } }`",
              "oneOf": [
                {
                  "description": "Reference to data at a path (e.g., \"data.user.name\", \"variables.count\")",
                  "properties": {
                    "default": {
                      "description": "Default value to use when the reference path returns null or doesn't exist. This allows graceful handling of optional fields while providing fallback values."
                    },
                    "type": {
                      "anyOf": [
                        {
                          "$ref": "#/definitions/ValueType"
                        },
                        {
                          "type": "null"
                        }
                      ],
                      "description": "Expected type hint for the referenced value. Used when the source type is unknown (e.g., HTTP response body). If omitted, the value is passed through as-is (typically as JSON)."
                    },
                    "value": {
                      "description": "Path to the data using dot notation (e.g., \"data.user.name\")",
                      "type": "string"
                    },
                    "valueType": {
                      "enum": [
                        "reference"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                },
                {
                  "description": "Immediate/literal value (string, number, boolean, object, array)",
                  "properties": {
                    "value": {
                      "description": "The literal value (string, number, boolean, object, or array)"
                    },
                    "valueType": {
                      "enum": [
                        "immediate"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                },
                {
                  "description": "Composite value - structured object or array with nested MappingValues",
                  "properties": {
                    "value": {
                      "allOf": [
                        {
                          "$ref": "#/definitions/CompositeInner"
                        }
                      ],
                      "description": "Either an object (HashMap) or array (Vec) of nested MappingValues."
                    },
                    "valueType": {
                      "enum": [
                        "composite"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                }
              ]
            },
            "ValueType": {
              "description": "Type hints for reference values. Used to interpret data from unknown sources (e.g., HTTP responses).\n\nNote: Type names are aligned with VariableType for consistency: - `integer` for whole numbers - `number` for floating point - `boolean` for true/false - `json` for pass-through JSON (distinct from `object`/`array` in VariableType)",
              "oneOf": [
                {
                  "description": "String value",
                  "enum": [
                    "string"
                  ],
                  "type": "string"
                },
                {
                  "description": "Integer number",
                  "enum": [
                    "integer"
                  ],
                  "type": "string"
                },
                {
                  "description": "Floating point number",
                  "enum": [
                    "number"
                  ],
                  "type": "string"
                },
                {
                  "description": "Boolean value",
                  "enum": [
                    "boolean"
                  ],
                  "type": "string"
                },
                {
                  "description": "JSON object or array (pass through as-is)",
                  "enum": [
                    "json"
                  ],
                  "type": "string"
                },
                {
                  "description": "Base64-encoded file data (FileData structure with content, filename, mimeType)",
                  "enum": [
                    "file"
                  ],
                  "type": "string"
                }
              ],
              "title": "ValueType"
            }
          },
          "description": "Executes a nested child scenario",
          "properties": {
            "childScenarioId": {
              "description": "ID of the child scenario to execute",
              "type": "string"
            },
            "childVersion": {
              "allOf": [
                {
                  "$ref": "#/definitions/ChildVersion"
                }
              ],
              "description": "Version of child scenario (\"latest\" or specific version number)"
            },
            "id": {
              "description": "Unique step identifier",
              "type": "string"
            },
            "inputMapping": {
              "additionalProperties": {
                "$ref": "#/definitions/MappingValue"
              },
              "description": "Maps parent data to child scenario inputs",
              "type": [
                "object",
                "null"
              ]
            },
            "maxRetries": {
              "description": "Maximum retry attempts (default: 3)",
              "format": "uint32",
              "minimum": 0.0,
              "type": [
                "integer",
                "null"
              ]
            },
            "name": {
              "description": "Human-readable step name",
              "type": [
                "string",
                "null"
              ]
            },
            "retryDelay": {
              "description": "Base delay between retries in milliseconds (default: 1000)",
              "format": "uint64",
              "minimum": 0.0,
              "type": [
                "integer",
                "null"
              ]
            },
            "timeout": {
              "description": "Step timeout in milliseconds. If exceeded, step fails.",
              "format": "uint64",
              "minimum": 0.0,
              "type": [
                "integer",
                "null"
              ]
            }
          },
          "required": [
            "childScenarioId",
            "childVersion",
            "id"
          ],
          "title": "StartScenarioStep",
          "type": "object"
        },
        "type": "StartScenario"
      },
      {
        "category": "control",
        "description": "Multi-way branch based on value matching",
        "displayName": "Switch",
        "schema": {
          "$schema": "http://json-schema.org/draft-07/schema#",
          "definitions": {
            "CompositeInner": {
              "anyOf": [
                {
                  "additionalProperties": {
                    "$ref": "#/definitions/MappingValue"
                  },
                  "description": "Object composite: each field maps to a MappingValue",
                  "type": "object"
                },
                {
                  "description": "Array composite: each element is a MappingValue",
                  "items": {
                    "$ref": "#/definitions/MappingValue"
                  },
                  "type": "array"
                }
              ],
              "description": "Inner value for CompositeValue - either an object or array of MappingValues."
            },
            "MappingValue": {
              "description": "A mapping value specifies how to obtain data for a field.\n\nUses explicit `valueType` discriminator: - `reference`: Value is a path to data (e.g., \"data.name\", \"steps.step1.outputs.result\") - `immediate`: Value is a literal (string, number, boolean, object, array) - `composite`: Value is a structured object or array with nested MappingValues\n\nExample reference: `{ \"valueType\": \"reference\", \"value\": \"data.user.name\" }` Example immediate: `{ \"valueType\": \"immediate\", \"value\": \"Hello World\" }` Example composite: `{ \"valueType\": \"composite\", \"value\": { \"name\": {...}, \"id\": {...} } }`",
              "oneOf": [
                {
                  "description": "Reference to data at a path (e.g., \"data.user.name\", \"variables.count\")",
                  "properties": {
                    "default": {
                      "description": "Default value to use when the reference path returns null or doesn't exist. This allows graceful handling of optional fields while providing fallback values."
                    },
                    "type": {
                      "anyOf": [
                        {
                          "$ref": "#/definitions/ValueType"
                        },
                        {
                          "type": "null"
                        }
                      ],
                      "description": "Expected type hint for the referenced value. Used when the source type is unknown (e.g., HTTP response body). If omitted, the value is passed through as-is (typically as JSON)."
                    },
                    "value": {
                      "description": "Path to the data using dot notation (e.g., \"data.user.name\")",
                      "type": "string"
                    },
                    "valueType": {
                      "enum": [
                        "reference"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                },
                {
                  "description": "Immediate/literal value (string, number, boolean, object, array)",
                  "properties": {
                    "value": {
                      "description": "The literal value (string, number, boolean, object, or array)"
                    },
                    "valueType": {
                      "enum": [
                        "immediate"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                },
                {
                  "description": "Composite value - structured object or array with nested MappingValues",
                  "properties": {
                    "value": {
                      "allOf": [
                        {
                          "$ref": "#/definitions/CompositeInner"
                        }
                      ],
                      "description": "Either an object (HashMap) or array (Vec) of nested MappingValues."
                    },
                    "valueType": {
                      "enum": [
                        "composite"
                      ],
                      "type": "string"
                    }
                  },
                  "required": [
                    "value",
                    "valueType"
                  ],
                  "type": "object"
                }
              ]
            },
            "SwitchCase": {
              "description": "A single case in a Switch step. Defines a match condition and the output to produce if matched.",
              "properties": {
                "match": {
                  "description": "The value to match against (interpretation depends on match_type)"
                },
                "matchType": {
                  "allOf": [
                    {
                      "$ref": "#/definitions/SwitchMatchType"
                    }
                  ],
                  "description": "The type of match to perform"
                },
                "output": {
                  "description": "The output to produce if this case matches"
                }
              },
              "required": [
                "match",
                "matchType",
                "output"
              ],
              "title": "SwitchCase",
              "type": "object"
            },
            "SwitchConfig": {
              "description": "Configuration for a Switch step. Defines the value to switch on, the cases to match, and the default output.",
              "properties": {
                "cases": {
                  "description": "Array of cases to match against the value",
                  "items": {
                    "$ref": "#/definitions/SwitchCase"
                  },
                  "type": "array"
                },
                "default": {
                  "description": "Default output if no case matches"
                },
                "value": {
                  "allOf": [
                    {
                      "$ref": "#/definitions/MappingValue"
                    }
                  ],
                  "description": "The value to switch on (evaluated at runtime)"
                }
              },
              "required": [
                "value"
              ],
              "title": "SwitchConfig",
              "type": "object"
            },
            "SwitchMatchType": {
              "description": "Match type for switch cases. Supports all ConditionOperator values plus compound match types.",
              "oneOf": [
                {
                  "description": "Greater than",
                  "enum": [
                    "GT"
                  ],
                  "type": "string"
                },
                {
                  "description": "Greater than or equal",
                  "enum": [
                    "GTE"
                  ],
                  "type": "string"
                },
                {
                  "description": "Less than",
                  "enum": [
                    "LT"
                  ],
                  "type": "string"
                },
                {
                  "description": "Less than or equal",
                  "enum": [
                    "LTE"
                  ],
                  "type": "string"
                },
                {
                  "description": "Equality check",
                  "enum": [
                    "EQ"
                  ],
                  "type": "string"
                },
                {
                  "description": "Not equal",
                  "enum": [
                    "NE"
                  ],
                  "type": "string"
                },
                {
                  "description": "String starts with prefix",
                  "enum": [
                    "STARTS_WITH"
                  ],
                  "type": "string"
                },
                {
                  "description": "String ends with suffix",
                  "enum": [
                    "ENDS_WITH"
                  ],
                  "type": "string"
                },
                {
                  "description": "Array contains value",
                  "enum": [
                    "CONTAINS"
                  ],
                  "type": "string"
                },
                {
                  "description": "Value in array",
                  "enum": [
                    "IN"
                  ],
                  "type": "string"
                },
                {
                  "description": "Value not in array",
                  "enum": [
                    "NOT_IN"
                  ],
                  "type": "string"
                },
                {
                  "description": "Check if value is defined (not null)",
                  "enum": [
                    "IS_DEFINED"
                  ],
                  "type": "string"
                },
                {
                  "description": "Check if value is empty",
                  "enum": [
                    "IS_EMPTY"
                  ],
                  "type": "string"
                },
                {
                  "description": "Check if value is not empty",
                  "enum": [
                    "IS_NOT_EMPTY"
                  ],
                  "type": "string"
                },
                {
                  "description": "Range check [min, max] - shorthand for GTE min AND LTE max",
                  "enum": [
                    "BETWEEN"
                  ],
                  "type": "string"
                },
                {
                  "description": "Object with optional {gte, gt, lte, lt} bounds",
                  "enum": [
                    "RANGE"
                  ],
                  "type": "string"
                }
              ],
              "title": "SwitchMatchType"
            },
            "ValueType": {
              "description": "Type hints for reference values. Used to interpret data from unknown sources (e.g., HTTP responses).\n\nNote: Type names are aligned with VariableType for consistency: - `integer` for whole numbers - `number` for floating point - `boolean` for true/false - `json` for pass-through JSON (distinct from `object`/`array` in VariableType)",
              "oneOf": [
                {
                  "description": "String value",
                  "enum": [
                    "string"
                  ],
                  "type": "string"
                },
                {
                  "description": "Integer number",
                  "enum": [
                    "integer"
                  ],
                  "type": "string"
                },
                {
                  "description": "Floating point number",
                  "enum": [
                    "number"
                  ],
                  "type": "string"
                },
                {
                  "description": "Boolean value",
                  "enum": [
                    "boolean"
                  ],
                  "type": "string"
                },
                {
                  "description": "JSON object or array (pass through as-is)",
                  "enum": [
                    "json"
                  ],
                  "type": "string"
                },
                {
                  "description": "Base64-encoded file data (FileData structure with content, filename, mimeType)",
                  "enum": [
                    "file"
                  ],
                  "type": "string"
                }
              ],
              "title": "ValueType"
            }
          },
          "description": "Multi-way branch based on value matching",
          "properties": {
            "config": {
              "anyOf": [
                {
                  "$ref": "#/definitions/SwitchConfig"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Switch configuration: value to switch on, cases, and default"
            },
            "id": {
              "description": "Unique step identifier",
              "type": "string"
            },
            "name": {
              "description": "Human-readable step name",
              "type": [
                "string",
                "null"
              ]
            }
          },
          "required": [
            "id"
          ],
          "title": "SwitchStep",
          "type": "object"
        },
        "type": "Switch"
      }
    ]
  },
  "version": {
    "agents": "1.0.0",
    "dsl": "3.0.0"
  }
}
