[package]
name = "runtara-agents"
version.workspace = true
edition.workspace = true
license.workspace = true
repository.workspace = true
description = "Native agent implementations for runtara workflows"
keywords = ["durable", "workflow", "agents"]
categories = ["development-tools"]

[lib]
name = "runtara_agents"
path = "src/lib.rs"
crate-type = ["rlib"]

[[bin]]
name = "generate_dsl_spec"
path = "src/bin/generate_dsl_spec.rs"

[features]
default = ["native"]

# Native platform - full agent support with all dependencies
native = [
    "dep:reqwest",
    "dep:ssh2",
    "dep:openssl",
    "dep:tokio",
]

# WASI target (wasm32-wasip2) - HTTP via wasi-http, no SFTP
wasi = []

# Browser/Node.js target - HTTP via fetch, no SFTP
wasm-js = []

[dependencies]
runtara-dsl = { path = "../runtara-dsl", version = "1.0" }
runtara-agent-macro = { path = "../runtara-agent-macro", version = "1.0" }
inventory = "0.3"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
csv = "1.3"
roxmltree = "0.20"
chrono = { version = "0.4", features = ["serde"] }
chrono-tz = "0.10"
base64 = "0.22"
encoding_rs = "0.8"
minijinja = "2.5"
sha2 = "0.10"
sha1 = "0.10"
md-5 = "0.10"
hmac = "0.12"
regex = "1"
strum = { version = "0.26", features = ["derive"] }
# Runtime support for spawn_blocking in sync capabilities (native only)
tokio = { version = "1", features = ["rt"], optional = true }
# Native implementations
rand = "0.8"
reqwest = { version = "0.12", default-features = false, features = ["json", "rustls-tls"], optional = true }
urlencoding = "2.1"
ssh2 = { version = "0.9", optional = true }
# Vendored OpenSSL for musl static builds (required by ssh2/libssh2-sys)
openssl = { workspace = true, optional = true }
# Glob pattern matching for file listing
glob = "0.3"
# ZIP archive support
zip = "2.2"

[dev-dependencies]
tempfile = "3"
tokio = { version = "1", features = ["rt", "macros"] }
wiremock = "0.6"
serial_test = "3"
