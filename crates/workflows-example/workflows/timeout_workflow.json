{
  "name": "Timeout Workflow",
  "description": "Demonstrates per-step timeout configuration for controlling execution duration",
  "steps": {
    "fast_step": {
      "stepType": "Agent",
      "id": "fast_step",
      "name": "Fast Operation",
      "agentId": "transform",
      "capabilityId": "map-fields",
      "timeout": 5000,
      "inputMapping": {
        "source": {
          "valueType": "reference",
          "value": "data"
        },
        "mapping": {
          "valueType": "immediate",
          "value": {
            "quickResult": "$.value"
          }
        }
      }
    },
    "slow_step": {
      "stepType": "Agent",
      "id": "slow_step",
      "name": "Slow Operation",
      "agentId": "transform",
      "capabilityId": "map-fields",
      "timeout": 30000,
      "inputMapping": {
        "source": {
          "valueType": "reference",
          "value": "steps.fast_step.outputs"
        },
        "mapping": {
          "valueType": "immediate",
          "value": {
            "processed": "$.quickResult",
            "timestamp": "$.quickResult"
          }
        }
      }
    },
    "timeout_loop": {
      "stepType": "While",
      "id": "timeout_loop",
      "name": "Bounded Loop",
      "condition": {
        "type": "operation",
        "op": "LT",
        "arguments": [
          { "valueType": "immediate", "value": 0 },
          { "valueType": "immediate", "value": 1 }
        ]
      },
      "subgraph": {
        "name": "Loop Body",
        "steps": {
          "iterate": {
            "stepType": "Agent",
            "id": "iterate",
            "agentId": "transform",
            "capabilityId": "map-fields",
            "inputMapping": {
              "source": {
                "valueType": "reference",
                "value": "steps.slow_step.outputs"
              },
              "mapping": {
                "valueType": "immediate",
                "value": {
                  "iteration": "$.processed"
                }
              }
            }
          },
          "finish": {
            "stepType": "Finish",
            "id": "finish",
            "inputMapping": {
              "loopResult": {
                "valueType": "reference",
                "value": "steps.iterate.outputs"
              }
            }
          }
        },
        "entryPoint": "iterate",
        "executionPlan": [
          { "fromStep": "iterate", "toStep": "finish" }
        ],
        "variables": {},
        "inputSchema": {},
        "outputSchema": {}
      },
      "config": {
        "maxIterations": 5,
        "timeout": 60000
      }
    },
    "finish": {
      "stepType": "Finish",
      "id": "finish",
      "name": "Final Output",
      "inputMapping": {
        "fastResult": {
          "valueType": "reference",
          "value": "steps.fast_step.outputs"
        },
        "slowResult": {
          "valueType": "reference",
          "value": "steps.slow_step.outputs"
        },
        "loopResult": {
          "valueType": "reference",
          "value": "steps.timeout_loop.outputs"
        }
      }
    }
  },
  "entryPoint": "fast_step",
  "executionPlan": [
    { "fromStep": "fast_step", "toStep": "slow_step" },
    { "fromStep": "slow_step", "toStep": "timeout_loop" },
    { "fromStep": "timeout_loop", "toStep": "finish" }
  ],
  "variables": {},
  "inputSchema": {
    "type": "object",
    "properties": {
      "value": { "type": "string", "description": "Input value to process" }
    },
    "required": ["value"]
  },
  "outputSchema": {
    "type": "object",
    "properties": {
      "fastResult": { "type": "object" },
      "slowResult": { "type": "object" },
      "loopResult": { "type": "object" }
    }
  }
}
