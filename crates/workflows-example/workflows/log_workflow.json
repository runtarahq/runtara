{
  "name": "Log Workflow",
  "description": "Demonstrates the Log step type for emitting custom debug and log events during workflow execution",
  "steps": {
    "log_start": {
      "stepType": "Log",
      "id": "log_start",
      "name": "Log Workflow Start",
      "level": "info",
      "message": "Starting data processing workflow",
      "context": {
        "inputData": {
          "valueType": "reference",
          "value": "data"
        },
        "timestamp": {
          "valueType": "immediate",
          "value": "workflow_started"
        }
      }
    },
    "validate": {
      "stepType": "Agent",
      "id": "validate",
      "name": "Validate Input",
      "agentId": "transform",
      "capabilityId": "map-fields",
      "inputMapping": {
        "source": {
          "valueType": "reference",
          "value": "data"
        },
        "mapping": {
          "valueType": "immediate",
          "value": {
            "value": "$.value",
            "isValid": "$.isValid"
          }
        }
      }
    },
    "log_validation": {
      "stepType": "Log",
      "id": "log_validation",
      "name": "Log Validation Result",
      "level": "debug",
      "message": "Validation completed",
      "context": {
        "validationResult": {
          "valueType": "reference",
          "value": "steps.validate.outputs"
        }
      }
    },
    "process": {
      "stepType": "Agent",
      "id": "process",
      "name": "Process Data",
      "agentId": "transform",
      "capabilityId": "map-fields",
      "inputMapping": {
        "source": {
          "valueType": "reference",
          "value": "steps.validate.outputs"
        },
        "mapping": {
          "valueType": "immediate",
          "value": {
            "processedValue": "$.value",
            "status": "$.isValid"
          }
        }
      }
    },
    "log_complete": {
      "stepType": "Log",
      "id": "log_complete",
      "name": "Log Completion",
      "level": "info",
      "message": "Workflow completed successfully",
      "context": {
        "result": {
          "valueType": "reference",
          "value": "steps.process.outputs"
        }
      }
    },
    "finish": {
      "stepType": "Finish",
      "id": "finish",
      "name": "Output Result",
      "inputMapping": {
        "result": {
          "valueType": "reference",
          "value": "steps.process.outputs"
        }
      }
    }
  },
  "entryPoint": "log_start",
  "executionPlan": [
    { "fromStep": "log_start", "toStep": "validate" },
    { "fromStep": "validate", "toStep": "log_validation" },
    { "fromStep": "log_validation", "toStep": "process" },
    { "fromStep": "process", "toStep": "log_complete" },
    { "fromStep": "log_complete", "toStep": "finish" }
  ],
  "variables": {},
  "inputSchema": {
    "type": "object",
    "properties": {
      "value": { "type": "string", "description": "Value to process" },
      "isValid": { "type": "boolean", "description": "Whether input is valid" }
    },
    "required": ["value"]
  },
  "outputSchema": {
    "type": "object",
    "properties": {
      "result": { "type": "object" }
    }
  }
}
